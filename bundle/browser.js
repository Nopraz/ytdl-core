/* eslint-disable */
var Ka=Object.defineProperty;var o=(i,e)=>Ka(i,"name",{value:e,configurable:!0}),Xa=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var b=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Z=b(Ee=>{"use strict";var za=Ee&&Ee.__classPrivateFieldSet||function(i,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(i,t):n?n.value=t:e.set(i,t),t},qr=Ee&&Ee.__classPrivateFieldGet||function(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)},ht,pt;Object.defineProperty(Ee,"__esModule",{value:!0});Ee.Platform=void 0;var Wt=class Wt{static load(e){e.fileCache.initialization(),za(this,ht,e,"f",pt)}static getShim(){if(!qr(this,ht,"f",pt))throw new Error("Platform is not loaded");return qr(this,ht,"f",pt)}};o(Wt,"Platform");var gt=Wt;Ee.Platform=gt;ht=gt;pt={value:void 0}});var Vr=b((ru,Qa)=>{Qa.exports={name:"@ybd-project/ytdl-core",version:"5.1.9-2",description:"YBD Project fork of ytdl-core.",author:"YBD Project",repository:{type:"git",url:"git://github.com/ybd-project/ytdl-core.git"},publishConfig:{registry:"https://npm.pkg.github.com"},engines:{node:">=16.0"},main:"./package/Platforms/Default/Default.js",types:"./package/types/index.d.ts",exports:{".":{types:"./package/types/index.d.ts",node:{import:"./package/Platforms/Default/Default.mjs",require:"./bundle/node.cjs"},browser:"./package/Platforms/Browser/Browser.js",default:"./package/Platforms/Default/Default.mjs"},"./browser":{types:"./package/types/index.d.ts",default:"./package/Platforms/Browser/Browser.mjs"},"./browser.bundle":{types:"./package/types/index.d.ts",default:"./bundle/browser.cjs"},"./serverless":{types:"./package/types/index.d.ts",default:"./package/Platforms/Serverless/Serverless.js"},"./types":{types:"./package/types/index.d.ts",default:"./package/types/index.d.ts"}},files:["package"],scripts:{test:"npx jest ./test/main.test.ts",build:"rmdir /s /q package && tsc && tsc-alias && npm run clear-cache-files && npm run create-node-bundle && npm run create-browser-bundle","clear-cache-files":"cd package/core && rmdir /s /q CacheFiles 2>nul & cd ../..",update:"ncu && ncu -u && npm i","publish:github":"npm run build && npm publish --registry=https://npm.pkg.github.com","publish:npm":"npm run build && npm publish --registry=https://registry.npmjs.org/","create-node-bundle":'rmdir /s /q bundle && mkdir bundle && esbuild ./package/Platforms/Default/Default.js --bundle --target=node16 --keep-names --format=cjs --platform=node --outfile=./bundle/node.cjs --banner:js="/* eslint-disable */"',"create-browser-bundle":'esbuild ./package/Platforms/Browser/Browser.js --banner:js="/* eslint-disable */" --bundle --target=chrome70 --keep-names --format=esm --define:global=globalThis --conditions=module --outfile=./bundle/browser.js --platform=browser --minify'},dependencies:{"bgutils-js":"^2.2.0",buffer:"^6.0.3",jsdom:"^25.0.1","node-fetch":"^3.3.2",sax:"^1.4.1",string_decoder:"^1.3.0"},devDependencies:{"@types/jest":"^29.5.13","@types/jsdom":"^21.1.7","@types/node":"^22.5.5","@types/sax":"^1.2.7",esbuild:"^0.24.0",eslint:"^9.11.0",jest:"^29.7.0","npm-check-updates":"^17.1.3","ts-jest":"^29.2.5","tsc-alias":"^1.8.10",typescript:"^5.6.2"},keywords:["youtube","video","audio","download","getInfo","ybd-project","ytdl","ytdl-core","secure","fast","browser","serverless","typescript"],license:"MIT"}});var Ye=b(J=>{"use strict";var Za=J&&J.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(J,"__esModule",{value:!0});J.ISSUES_URL=J.REPO_URL=J.VERSION=void 0;var Ja=Za(Vr());J.VERSION=Ja.default.version;J.REPO_URL="https://github.com/ybd-project/ytdl-core";J.ISSUES_URL="https://github.com/ybd-project/ytdl-core/issues"});var j=b(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.Logger=void 0;var Yt=Ye(),P={red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",reset:"\x1B[0m"},Kt=class Kt{static replaceColorTags(e){try{e=e.replace(/<magenta>/g,P.magenta),e=e.replace(/<\/magenta>/g,P.reset),e=e.replace(/<debug>/g,P.magenta),e=e.replace(/<\/debug>/g,P.reset),e=e.replace(/<blue>/g,P.blue),e=e.replace(/<\/blue>/g,P.reset),e=e.replace(/<info>/g,P.blue),e=e.replace(/<\/info>/g,P.reset),e=e.replace(/<green>/g,P.green),e=e.replace(/<\/green>/g,P.reset),e=e.replace(/<success>/g,P.green),e=e.replace(/<\/success>/g,P.reset),e=e.replace(/<yellow>/g,P.yellow),e=e.replace(/<\/yellow>/g,P.reset),e=e.replace(/<warning>/g,P.yellow),e=e.replace(/<\/warning>/g,P.reset),e=e.replace(/<red>/g,P.red),e=e.replace(/<\/red>/g,P.reset),e=e.replace(/<error>/g,P.red),e=e.replace(/<\/error>/g,P.reset)}catch{}return e}static convertMessage(e){return this.replaceColorTags(e)}static convertMessages(e){return e.map(t=>this.replaceColorTags(t))}static debug(...e){(Yt.VERSION.includes("dev")||Yt.VERSION.includes("beta")||Yt.VERSION.includes("test")||this.logDisplay.includes("debug"))&&console.log(this.convertMessage("<debug>[  DEBUG  ]:</debug>"),...this.convertMessages(e))}static info(...e){this.logDisplay.includes("info")&&console.info(this.convertMessage("<info>[  INFO!  ]:</info>"),...this.convertMessages(e))}static success(...e){this.logDisplay.includes("success")&&console.log(this.convertMessage("<success>[ SUCCESS ]:</success>"),...this.convertMessages(e))}static warning(...e){this.logDisplay.includes("warning")&&console.warn(this.convertMessage("<warning>[ WARNING ]:</warning>"),...this.convertMessages(e))}static error(...e){this.logDisplay.includes("error")&&console.error(this.convertMessage("<error>[  ERROR  ]:</error>"),...this.convertMessages(e))}};o(Kt,"Logger");var mt=Kt;yt.Logger=mt;mt.logDisplay=["info","success","warning","error"]});var Te=b(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.Url=void 0;var be="https://www.youtube.com",eo=/^https?:\/\//,Hr=/^[a-zA-Z0-9-_]{11}$/,to=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),io=/^https?:\/\/(youtu\.be\/|(www\.)?youtube\.com\/(embed|v|shorts|live)\/)/,zt=class zt{static getBaseUrl(){return be}static getPlayerJsUrl(e){return`${be}/s/player/${e}/player_ias.vflset/en_US/base.js`}static getWatchPageUrl(e){return`${be}/watch?v=${e}`}static getEmbedUrl(e){return`${be}/embed/${e}`}static getIframeApiUrl(){return`${be}/iframe_api`}static getInnertubeBaseUrl(){return`${be}/youtubei/v1`}static getTvUrl(){return`${be}/tv`}static getRefreshTokenApiUrl(){return`${be}/o/oauth2/token`}static validateID(e){return Hr.test(e.trim())}static getURLVideoID(e){let t=new URL(e.trim()),r=t.searchParams.get("v");if(io.test(e.trim())&&!r){let n=t.pathname.split("/");r=t.host==="youtu.be"?n[1]:n[2]}else if(t.hostname&&!to.has(t.hostname))throw new Error("Not a YouTube domain");if(!r)throw new Error(`No video id found: "${e}"`);if(r=r.substring(0,11),!this.validateID(r))throw new TypeError(`Video id (${r}) does not match expected format (${Hr.toString()})`);return r}static getVideoID(e){return this.validateID(e)?e:eo.test(e.trim())?this.getURLVideoID(e):null}static validateURL(e){try{return this.getURLVideoID(e),!0}catch{return!1}}};o(zt,"Url");var Xt=zt;Et.Url=Xt});var Ke=b(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.UserAgent=void 0;var $r={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61"],ios:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/127.0.0.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/126.0.1.45 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/123.0.2.98 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/125.0.3.110 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/124.0.5.72 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 14_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/122.0.4.82 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/128.0.1.101 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/125.0.1.95 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_8 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/121.0.2.67 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 16_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/129.0.0.85 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/126.0.3.92 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 14_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/123.0.5.105 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/127.0.2.56 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/124.0.1.30 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/120.0.4.102 Mobile/15E148 Safari/604.1"],android:["Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.146 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 14; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.128 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 11; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 14; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.128 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 9; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.146 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 12; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/26.0 Chrome/122.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/92.0.4515.105 Mobile Safari/537.36"],tv:["Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"]},Qt=class Qt{static getRandomUserAgent(e){let t=$r[e];return t?t[Math.floor(Math.random()*t.length)]:$r.desktop[0]}};o(Qt,"UserAgent");var Pe=Qt;bt.UserAgent=Pe;Pe.default="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36";Pe.ios="com.google.ios.youtube/19.29.1 (iPhone16,2; U; CPU iOS 17_5_1 like Mac OS X;)";Pe.android="com.google.android.youtube/18.48.37(Linux; U; Android 13; en_US; sdk_gphone64_x86_64 Build/UPB4.230623.005) gzip";Pe.tv="Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"});var ti=b(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});var ei=class ei extends Error{constructor(e,t){super(e),this.statusCode=t||0}};o(ei,"RequestError");var Zt=ei;Jt.default=Zt});var Gr=b(Xe=>{"use strict";var ro=Xe&&Xe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xe,"__esModule",{value:!0});var no=ro(ti()),ri=class ri extends no.default{constructor(e,t,r){super(e),this.response=t,this.statusCode=r||0}};o(ri,"PlayerRequestError");var ii=ri;Xe.default=ii});var jr=b(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var oi=class oi extends Error{};o(oi,"UnrecoverableError");var ni=oi;ai.default=ni});var Tt=b(ee=>{"use strict";var si=ee&&ee.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ee,"__esModule",{value:!0});ee.RequestError=ee.UnrecoverableError=ee.PlayerRequestError=void 0;var ao=Gr();Object.defineProperty(ee,"PlayerRequestError",{enumerable:!0,get:o(function(){return si(ao).default},"get")});var oo=jr();Object.defineProperty(ee,"UnrecoverableError",{enumerable:!0,get:o(function(){return si(oo).default},"get")});var so=ti();Object.defineProperty(ee,"RequestError",{enumerable:!0,get:o(function(){return si(so).default},"get")})});var Be=b(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.Fetcher=void 0;var lo=Z(),uo=j(),co=Tt(),fo=Ke(),ui=class ui{static async fetch(e,t,r=!1){var f;let n=lo.Platform.getShim(),{rewriteRequest:s,originalProxy:u}=n.requestRelated;if(!r){if(typeof s=="function"){let d=s(e,t||{},{isDownloadUrl:!1});t=d.options,e=d.url}if(u)try{let d=new URL(u.base);e.includes(d.host)||(e=`${d.protocol}//${d.host}/?url=${encodeURIComponent(e)}`)}catch{}}uo.Logger.debug(`[ Request ]: <magenta>${(t==null?void 0:t.method)||"GET"}</magenta> -> ${e}`);let c=new Headers;return t!=null&&t.headers&&Object.entries(t.headers).forEach(([d,m])=>{m&&c.append(d,m.toString())}),c.has("User-Agent")||c.append("User-Agent",fo.UserAgent.getRandomUserAgent("desktop")),await n.fetcher(e,{method:(t==null?void 0:t.method)||"GET",headers:c,body:(f=t==null?void 0:t.body)==null?void 0:f.toString()})}static async request(e,{requestOptions:t,rewriteRequest:r,originalProxy:n}={}){var d;if(typeof r=="function"){let m=r(e,t||{},{isDownloadUrl:!1});t=m.options,e=m.url}if(n)try{let m=new URL(n.base);e.includes(m.host)||(e=`${m.protocol}//${m.host}${m.pathname}?${n.urlQueryName||"url"}=${encodeURIComponent(e)}`)}catch{}let s=await this.fetch(e,{method:(t==null?void 0:t.method)||"GET",headers:t==null?void 0:t.headers,body:(d=t==null?void 0:t.body)==null?void 0:d.toString()},!0),u=s.status.toString(),c=s.headers.get("location")||null;if(u.startsWith("2"))return(s.headers.get("content-type")||"").includes("application/json")?s.json():s.text();if(u.startsWith("3")&&c)return this.request(c.toString(),{requestOptions:t,rewriteRequest:r,originalProxy:n});throw new co.RequestError(`Status Code: ${u}`,s.status)}};o(ui,"Fetcher");var li=ui;_t.Fetcher=li});var ze=b(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.lastUpdateCheck=void 0;q.between=di;q.tryParseBetween=Yr;q.parseAbbreviatedNumber=Kr;q.cutAfterJS=Xr;q.checkForUpdates=Jr;q.getPropInsensitive=zr;q.setPropInsensitive=Qr;q.generateClientPlaybackNonce=Zr;var ho=Be(),po=Ye(),ci=j(),go=[{start:'"',end:'"'},{start:"'",end:"'"},{start:"`",end:"`"},{start:"/",end:"/",startPrefix:/(^|[[{:;,/])\s?$/}],mo=1e3*60*60*12;function Wr(i,e){return Object.keys(i).find(t=>t.toLowerCase()===e.toLowerCase())||null}o(Wr,"findPropKeyInsensitive");function di(i,e,t){let r=null;if(e instanceof RegExp){let n=i.match(e);if(!n)return"";r=(n.index||0)+n[0].length}else{if(r=i.indexOf(e),r===-1)return"";r+=e.length}return i=i.slice(r),r=i.indexOf(t),r===-1?"":(i=i.slice(0,r),i)}o(di,"between");function Yr(i,e,t,r="",n=""){try{let s=di(i,e,t);return s?JSON.parse(`${r}${s}${n}`):null}catch{return null}}o(Yr,"tryParseBetween");function Kr(i){let e=i.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/);if(e){let t=e[2],r=e[1];return r=parseFloat(r),Math.round(t==="M"?r*1e6:t==="K"?r*1e3:r)}return null}o(Kr,"parseAbbreviatedNumber");function Xr(i){let e=null,t=null;if(i[0]==="["?(e="[",t="]"):i[0]==="{"&&(e="{",t="}"),!e)throw new Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${i[0]}`);let r=null,n=!1,s=0;for(let u=0;u<i.length;u++){if(r!==null&&!n&&i[u]===r.end){r=null;continue}else if(!n&&r===null){for(let c of go)if(i[u]===c.start&&(!c.startPrefix||i.substring(u-10,u).match(c.startPrefix))){r=c;break}if(r!==null)continue}if(n=i[u]==="\\"&&!n,r===null&&(i[u]===e?s++:i[u]===t&&s--,s===0))return i.slice(0,u+1)}throw new Error("Can't cut unsupported JSON (no matching closing bracket found)")}o(Xr,"cutAfterJS");function zr(i,e){let t=Wr(i,e);return t&&i[t]}o(zr,"getPropInsensitive");function Qr(i,e,t){let r=Wr(i,e);return i[r||e]=t,r}o(Qr,"setPropInsensitive");function Zr(i){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";return Array.from({length:i},()=>e[Math.floor(Math.random()*e.length)]).join("")}o(Zr,"generateClientPlaybackNonce");var yo=0,wt=0;q.lastUpdateCheck=wt;function Jr(){return!process.env.YTDL_NO_UPDATE&&Date.now()-wt>=mo?(q.lastUpdateCheck=wt=Date.now(),ho.Fetcher.request("https://api.github.com/repos/ybd-project/ytdl-core/contents/package.json",{requestOptions:{headers:{"User-Agent":'Chromium";v="112", "Microsoft Edge";v="112", "Not:A-Brand";v="99'}}}).then(t=>{let r=Buffer.from(t.content,t.encoding);JSON.parse(r.toString("ascii")).version!==po.VERSION&&yo++<5&&ci.Logger.warning('@ybd-project/ytdl-core is out of date! Update with "npm install @ybd-project/ytdl-core@latest".')},t=>{ci.Logger.warning("Error checking for updates:",t.message),ci.Logger.warning("You can disable this check by setting the `YTDL_NO_UPDATE` env variable.")})):null}o(Jr,"checkForUpdates");q.default={between:di,tryParseBetween:Yr,parseAbbreviatedNumber:Kr,cutAfterJS:Xr,lastUpdateCheck:wt,checkForUpdates:Jr,getPropInsensitive:zr,setPropInsensitive:Qr,generateClientPlaybackNonce:Zr}});var fe=b(Le=>{"use strict";var Eo=Le&&Le.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Le,"__esModule",{value:!0});Le.Clients=void 0;var fi=Eo(ze()),_e=Ke(),ue="https://www.youtube.com/youtubei/v1",ce=Object.freeze({web:{context:{client:{clientName:"WEB",clientVersion:"2.20240726.00.00",userAgent:_e.UserAgent.default}},clientName:1,apiInfo:{key:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8"}},webCreator:{context:{client:{clientName:"WEB_CREATOR",clientVersion:"1.20240723.03.00",userAgent:_e.UserAgent.default}},clientName:62,apiInfo:{key:"AIzaSyBUPetSUmoZL-OhlxA7wSac5XinrygCqMo"}},webEmbedded:{context:{client:{clientName:"WEB_EMBEDDED_PLAYER",clientVersion:"2.20240111.09.00",userAgent:_e.UserAgent.default,clientScreen:"EMBED"}},clientName:56,apiInfo:{key:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8"}},android:{context:{client:{clientName:"ANDROID",clientVersion:"18.48.37",androidSdkVersion:33,userAgent:_e.UserAgent.android,osName:"Android",osVersion:"13"}},clientName:3,apiInfo:{key:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w"}},ios:{context:{client:{clientName:"IOS",clientVersion:"19.29.1",deviceMake:"Apple",deviceModel:"iPhone16,2",userAgent:_e.UserAgent.ios,osName:"iPhone",osVersion:"17.5.1.21F90"}},clientName:5,apiInfo:{key:"AIzaSyB-63vPrdThhKuerbB2N_l7Kwwcxj6yUAc"}},mweb:{context:{client:{clientName:"MWEB",clientVersion:"2.20240726.01.00",userAgent:_e.UserAgent.default}},clientName:2,apiInfo:{}},tv:{context:{client:{clientName:"TVHTML5",clientVersion:"7.20240724.13.00",userAgent:_e.UserAgent.tv}},clientName:7,apiInfo:{}},tvEmbedded:{context:{client:{clientName:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",clientVersion:"2.0",userAgent:_e.UserAgent.tv},thirdParty:{embedUrl:"https://www.youtube.com/"}},clientName:85,apiInfo:{}}}),de={videoId:"",cpn:fi.default.generateClientPlaybackNonce(16),contentCheckOk:!0,racyCheckOk:!0,serviceIntegrityDimensions:{},playbackContext:{contentPlaybackContext:{vis:0,splay:!1,referer:"",currentUrl:"",autonavState:"STATE_ON",autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1",signatureTimestamp:0}},attestationRequest:{omitBotguardData:!0},context:{client:{},request:{useSsl:!0,internalExperimentFlags:[],consistencyTokenJars:[]},user:{lockedSafetyMode:!1}}},te=class te{static getAuthorizationHeader(e){return e&&e.isEnabled?{authorization:"Bearer "+e.getAccessToken()}:{}}static web({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:s,hl:u,gl:c}}){let f=ce.web,d={...de};return d.videoId=e,d.playbackContext.contentPlaybackContext.signatureTimestamp=t,d.context.client=f.context.client,d.context.client.hl=u||"en",d.context.client.gl=c||"US",r?d.serviceIntegrityDimensions.poToken=r:d.serviceIntegrityDimensions=void 0,n&&(d.context.client.visitorData=n),{url:`${ue}/player?key=${f.apiInfo.key}&prettyPrint=false`,payload:d,headers:{"X-YouTube-Client-Name":f.clientName,"X-Youtube-Client-Version":f.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":f.context.client.userAgent,...te.getAuthorizationHeader(s)}}}static web_nextApi({videoId:e,options:{poToken:t,visitorData:r,oauth2:n,hl:s,gl:u}}){let c=ce.web,f={...de,autonavState:"STATE_OFF",playbackContext:{vis:0,lactMilliseconds:"-1"},captionsRequested:!1};return f.videoId=e,f.context.client=c.context.client,f.context.client.hl=s||"en",f.context.client.gl=u||"US",t?f.serviceIntegrityDimensions.poToken=t:f.serviceIntegrityDimensions=void 0,r&&(f.context.client.visitorData=r),{url:`${ue+"/next"}?key=${c.apiInfo.key}&prettyPrint=false`,payload:f,headers:{"X-YouTube-Client-Name":c.clientName,"X-Youtube-Client-Version":c.context.client.clientVersion,"X-Goog-Visitor-Id":r,"User-Agent":c.context.client.userAgent,...te.getAuthorizationHeader(n)}}}static webCreator({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,hl:s,gl:u}}){let c=ce.webCreator,f={...de};return f.videoId=e,f.playbackContext.contentPlaybackContext.signatureTimestamp=t,f.context.client=c.context.client,f.context.client.hl=s||"en",f.context.client.gl=u||"US",r?f.serviceIntegrityDimensions.poToken=r:f.serviceIntegrityDimensions=void 0,n&&(f.context.client.visitorData=n),{url:`${ue}/player?key=${c.apiInfo.key}&prettyPrint=false`,payload:f,headers:{"X-YouTube-Client-Name":c.clientName,"X-Youtube-Client-Version":c.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":c.context.client.userAgent}}}static webEmbedded({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,hl:s,gl:u}}){let c=ce.webEmbedded,f={...de};return f.videoId=e,f.playbackContext.contentPlaybackContext.signatureTimestamp=t,f.context.client=c.context.client,f.context.client.hl=s||"en",f.context.client.gl=u||"US",r?f.serviceIntegrityDimensions.poToken=r:f.serviceIntegrityDimensions=void 0,n&&(f.context.client.visitorData=n),{url:`${ue}/player?key=${c.apiInfo.key}&prettyPrint=false`,payload:f,headers:{"X-YouTube-Client-Name":c.clientName,"X-Youtube-Client-Version":c.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":c.context.client.userAgent}}}static android({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:s,hl:u,gl:c}}){let f=ce.android,d={...de};return d.videoId=e,d.playbackContext.contentPlaybackContext.signatureTimestamp=t,d.context.client=f.context.client,d.context.client.hl=u||"en",d.context.client.gl=c||"US",r?d.serviceIntegrityDimensions.poToken=r:d.serviceIntegrityDimensions=void 0,n&&(d.context.client.visitorData=n),{url:`${ue}/player?key=${f.apiInfo.key}&prettyPrint=false&id=${e}&t=${fi.default.generateClientPlaybackNonce(12)}`,payload:d,headers:{"X-YouTube-Client-Name":f.clientName,"X-Youtube-Client-Version":f.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":f.context.client.userAgent,...te.getAuthorizationHeader(s)}}}static ios({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:s,hl:u,gl:c}}){let f=ce.ios,d={...de};return d.videoId=e,d.playbackContext.contentPlaybackContext.signatureTimestamp=t,d.context.client=f.context.client,d.context.client.hl=u||"en",d.context.client.gl=c||"US",r?d.serviceIntegrityDimensions.poToken=r:d.serviceIntegrityDimensions=void 0,n&&(d.context.client.visitorData=n),{url:`${ue}/player?key=${f.apiInfo.key}&prettyPrint=false&id=${e}&t=${fi.default.generateClientPlaybackNonce(12)}`,payload:d,headers:{"X-YouTube-Client-Name":f.clientName,"X-Youtube-Client-Version":f.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":f.context.client.userAgent,...te.getAuthorizationHeader(s)}}}static mweb({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:s,hl:u,gl:c}}){let f=ce.mweb,d={...de};return d.videoId=e,d.playbackContext.contentPlaybackContext.signatureTimestamp=t,d.context.client=f.context.client,d.context.client.hl=u||"en",d.context.client.gl=c||"US",r?d.serviceIntegrityDimensions.poToken=r:d.serviceIntegrityDimensions=void 0,n&&(d.context.client.visitorData=n),{url:`${ue}/player?prettyPrint=false`,payload:d,headers:{"X-YouTube-Client-Name":f.clientName,"X-Youtube-Client-Version":f.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":f.context.client.userAgent,...te.getAuthorizationHeader(s)}}}static tv({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:s,hl:u,gl:c}}){let f=ce.web,d={...de};return d.videoId=e,d.playbackContext.contentPlaybackContext.signatureTimestamp=t,d.context.client=f.context.client,d.context.client.hl=u||"en",d.context.client.gl=c||"US",r?d.serviceIntegrityDimensions.poToken=r:d.serviceIntegrityDimensions=void 0,n&&(d.context.client.visitorData=n),{url:`${ue}/player?prettyPrint=false`,payload:d,headers:{"X-YouTube-Client-Name":f.clientName,"X-Youtube-Client-Version":f.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":f.context.client.userAgent,...te.getAuthorizationHeader(s)}}}static tvEmbedded({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:s,hl:u,gl:c}}){let f=ce.tvEmbedded,d={...de};return d.videoId=e,d.playbackContext.contentPlaybackContext.signatureTimestamp=t,d.context.client=f.context.client,d.context.client.hl=u||"en",d.context.client.gl=c||"US",r?d.serviceIntegrityDimensions.poToken=r:d.serviceIntegrityDimensions=void 0,n&&(d.context.client.visitorData=n),{url:`${ue}/player?prettyPrint=false`,payload:d,headers:{"X-YouTube-Client-Name":f.clientName,"X-Youtube-Client-Version":f.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":f.context.client.userAgent,...te.getAuthorizationHeader(s)}}}};o(te,"Clients");var hi=te;Le.Clients=hi});var he=b(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});var At=Tt(),pi=Be(),yi=class yi{static playError(e){let t=e&&e.playabilityStatus;return t?t.status==="ERROR"||t.status==="LOGIN_REQUIRED"?new At.UnrecoverableError(t.reason||t.messages&&t.messages[0]):t.status==="LIVE_STREAM_OFFLINE"?new At.UnrecoverableError(t.reason||"The live stream is offline."):t.status==="UNPLAYABLE"?new At.UnrecoverableError(t.reason||"This video is unavailable."):null:null}static request(e,t,r){return new Promise(async(n,s)=>{let u={"Content-Type":"application/json","X-Goog-Visitor-Id":r.options.visitorData||"",...t.headers},c={requestOptions:{method:"POST",headers:u,body:typeof t.payload=="string"?t.payload:JSON.stringify(t.payload)},rewriteRequest:r.options.rewriteRequest,originalProxy:r.options.originalProxy},f=e.includes("/next"),d=o(m=>{let E=this.playError(m);if(E){if(c.originalProxy){c.originalProxy=void 0,pi.Fetcher.request(e,c).then(d).catch(_=>{s({isError:!0,error:_,contents:null})});return}return s({isError:!0,error:E,contents:m})}if(!f&&(!m.videoDetails||r.videoId!==m.videoDetails.videoId)){let _=new At.PlayerRequestError("Malformed response from YouTube",m,null);return _.response=m,s({isError:!0,error:_,contents:m})}n({isError:!1,error:null,contents:m})},"responseHandler");try{pi.Fetcher.request(e,c).then(d).catch(m=>{c.originalProxy&&(c.originalProxy=void 0,pi.Fetcher.request(e,c).then(d).catch(E=>{s({isError:!0,error:E,contents:null})})),s({isError:!0,error:m,contents:null})})}catch(m){s({isError:!0,error:m,contents:null})}})}};o(yi,"Base");var gi=yi;mi.default=gi});var rn=b(Qe=>{"use strict";var bo=Qe&&Qe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Qe,"__esModule",{value:!0});var en=fe(),tn=bo(he()),bi=class bi{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=en.Clients.web(e);return await tn.default.request(t,{payload:r,headers:n},e)}static async getNextResponse(e){let{url:t,payload:r,headers:n}=en.Clients.web_nextApi(e);return await tn.default.request(t,{payload:r,headers:n},e)}};o(bi,"Web");var Ei=bi;Qe.default=Ei});var nn=b(Ze=>{"use strict";var To=Ze&&Ze.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ze,"__esModule",{value:!0});var _o=fe(),wo=To(he()),_i=class _i{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=_o.Clients.webCreator(e);return await wo.default.request(t,{payload:r,headers:n},e)}};o(_i,"WebCreator");var Ti=_i;Ze.default=Ti});var an=b(Je=>{"use strict";var Ao=Je&&Je.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Je,"__esModule",{value:!0});var Io=fe(),So=Ao(he()),Ai=class Ai{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Io.Clients.webEmbedded(e);return await So.default.request(t,{payload:r,headers:n},e)}};o(Ai,"WebEmbedded");var wi=Ai;Je.default=wi});var on=b(et=>{"use strict";var Ro=et&&et.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(et,"__esModule",{value:!0});var Co=fe(),Po=Ro(he()),Si=class Si{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Co.Clients.mweb(e);return await Po.default.request(t,{payload:r,headers:n},e)}};o(Si,"MWeb");var Ii=Si;et.default=Ii});var sn=b(tt=>{"use strict";var No=tt&&tt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(tt,"__esModule",{value:!0});var Do=fe(),Oo=No(he()),Ci=class Ci{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Do.Clients.android(e);return await Oo.default.request(t,{payload:r,headers:n},e)}};o(Ci,"Android");var Ri=Ci;tt.default=Ri});var ln=b(it=>{"use strict";var Mo=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(it,"__esModule",{value:!0});var vo=fe(),Bo=Mo(he()),Ni=class Ni{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=vo.Clients.ios(e);return await Bo.default.request(t,{payload:r,headers:n},e)}};o(Ni,"Ios");var Pi=Ni;it.default=Pi});var un=b(rt=>{"use strict";var Lo=rt&&rt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(rt,"__esModule",{value:!0});var Uo=fe(),xo=Lo(he()),Oi=class Oi{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Uo.Clients.tv(e);return await xo.default.request(t,{payload:r,headers:n},e)}};o(Oi,"Tv");var Di=Oi;rt.default=Di});var cn=b(nt=>{"use strict";var Fo=nt&&nt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(nt,"__esModule",{value:!0});var ko=fe(),qo=Fo(he()),vi=class vi{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=ko.Clients.tvEmbedded(e);return await qo.default.request(t,{payload:r,headers:n},e)}};o(vi,"TvEmbedded");var Mi=vi;nt.default=Mi});var It=b(N=>{"use strict";var we=N&&N.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(N,"__esModule",{value:!0});N.TvEmbedded=N.Tv=N.Ios=N.Android=N.MWeb=N.WebEmbedded=N.WebCreator=N.Web=void 0;var Vo=rn();Object.defineProperty(N,"Web",{enumerable:!0,get:o(function(){return we(Vo).default},"get")});var Ho=nn();Object.defineProperty(N,"WebCreator",{enumerable:!0,get:o(function(){return we(Ho).default},"get")});var $o=an();Object.defineProperty(N,"WebEmbedded",{enumerable:!0,get:o(function(){return we($o).default},"get")});var Go=on();Object.defineProperty(N,"MWeb",{enumerable:!0,get:o(function(){return we(Go).default},"get")});var jo=sn();Object.defineProperty(N,"Android",{enumerable:!0,get:o(function(){return we(jo).default},"get")});var Wo=ln();Object.defineProperty(N,"Ios",{enumerable:!0,get:o(function(){return we(Wo).default},"get")});var Yo=un();Object.defineProperty(N,"Tv",{enumerable:!0,get:o(function(){return we(Yo).default},"get")});var Ko=cn();Object.defineProperty(N,"TvEmbedded",{enumerable:!0,get:o(function(){return we(Ko).default},"get")})});var xi=b(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.OAuth2=void 0;var fn=Z(),Ue=j(),St=Te(),Xo=Ke(),zo=It(),dn=Be(),Bi={tvScript:new RegExp('<script\\s+id="base-js"\\s+src="([^"]+)"[^>]*><\\/script>'),clientIdentity:new RegExp('clientId:"(?<client_id>[^"]+)",[^"]*?:"(?<client_secret>[^"]+)"')},Rt=fn.Platform.getShim().fileCache,Ui=class Ui{constructor(e){var t,r;if(this.isEnabled=!1,this.credentials={accessToken:"",refreshToken:"",expiryDate:""},this.accessToken="",this.refreshToken="",this.expiryDate="",!e){this.isEnabled=!1;return}if(this.isEnabled=!0,this.credentials=e,this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiryDate=e.expiryDate,this.clientId=(t=e.clientData)==null?void 0:t.clientId,this.clientSecret=(r=e.clientData)==null?void 0:r.clientSecret,this.shouldRefreshToken())try{this.refreshAccessToken().finally(()=>this.availableTokenCheck())}catch{}else this.availableTokenCheck();Rt.set("oauth2",JSON.stringify(e))}async availableTokenCheck(){try{let e=await Rt.get("html5Player");zo.Web.getPlayerResponse({videoId:"dQw4w9WgXcQ",signatureTimestamp:parseInt((e==null?void 0:e.signatureTimestamp)||"0")||0,options:{oauth2:this}}).then(()=>Ue.Logger.debug("The specified OAuth2 token is valid.")).catch(t=>{t.error.message.includes("401")&&this.error("Request using the specified token failed (Web Client). Generating the token again may fix the problem.")})}catch(e){(e.message||e.error.message).includes("401")&&this.error("Request using the specified token failed (Web Client). Generating the token again may fix the problem.")}}error(e){Ue.Logger.error(e),Ue.Logger.info("OAuth2 is disabled due to an error."),this.isEnabled=!1}async getClientData(){var c,f,d,m,E,_,T;let e=await Rt.get("oauth2")||{};if((c=e.clientData)!=null&&c.clientId&&((f=e.clientData)!=null&&f.clientSecret))return{clientId:e.clientData.clientId,clientSecret:e.clientData.clientSecret};let t={"User-Agent":Xo.UserAgent.tv,Referer:St.Url.getTvUrl()},r=fn.Platform.getShim(),n=await dn.Fetcher.fetch(St.Url.getTvUrl(),{headers:t});if(!n.ok)return this.error("Failed to get client data: "+n.status),null;let s=await n.text(),u=(d=Bi.tvScript.exec(s))==null?void 0:d[1];if(u){Ue.Logger.debug("Found YouTube TV script: "+u);let w=await dn.Fetcher.fetch(St.Url.getBaseUrl()+u,{headers:t});if(!w.ok)return this.error("TV script request failed with status code: "+w.status),null;let C=await w.text(),$=(E=(m=Bi.clientIdentity.exec(C))==null?void 0:m.groups)==null?void 0:E.client_id,v=(T=(_=Bi.clientIdentity.exec(C))==null?void 0:_.groups)==null?void 0:T.client_secret;return!$||!v?(this.error("Could not obtain client ID. Please create an issue in the repository for possible specification changes on YouTube's side."),null):(Ue.Logger.debug("Found client ID: "+$),Ue.Logger.debug("Found client secret: "+v),{clientId:$,clientSecret:v})}return this.error("Could not obtain script URL. Please create an issue in the repository for possible specification changes on YouTube's side."),null}shouldRefreshToken(){return this.isEnabled?Date.now()>=new Date(this.expiryDate).getTime():!1}async refreshAccessToken(){if(this.isEnabled){if(!this.clientId||!this.clientSecret){let e=await this.getClientData();if(!e)return;this.clientId=e.clientId,this.clientSecret=e.clientSecret,Rt.set("oauth2",JSON.stringify({accessToken:this.accessToken,refreshToken:this.refreshToken,expiryDate:this.expiryDate,clientData:{clientId:e.clientId,clientSecret:e.clientSecret}}))}if(!this.refreshToken)return this.error("Refresh token is missing, make sure it is specified.");try{let e={client_id:this.clientId,client_secret:this.clientSecret,refresh_token:this.refreshToken,grant_type:"refresh_token"},t=await fetch(St.Url.getRefreshTokenApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)return this.error(`Failed to refresh access token: ${t.status}`);let r=await t.json();if(r.error_code)return this.error("Authorization server returned an error: "+JSON.stringify(r));this.expiryDate=new Date(Date.now()+r.expires_in*1e3).toISOString(),this.accessToken=r.access_token}catch(e){this.error(e.message)}}}getAccessToken(){return this.accessToken}getCredentials(){return this.credentials}};o(Ui,"OAuth2");var Li=Ui;Ct.OAuth2=Li});var ki=b((exports,module)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Signature=void 0;var Platform_1=Z(),Log_1=j(),DECIPHER_NAME_REGEXPS=["\\bm=([a-zA-Z0-9$]{2,})\\(decodeURIComponent\\(h\\.s\\)\\)","\\bc&&\\(c=([a-zA-Z0-9$]{2,})\\(decodeURIComponent\\(c\\)\\)",'(?:\\b|[^a-zA-Z0-9$])([a-zA-Z0-9$]{2,})\\s*=\\s*function\\(\\s*a\\s*\\)\\s*\\{\\s*a\\s*=\\s*a\\.split\\(\\s*""\\s*\\)','([\\w$]+)\\s*=\\s*function\\((\\w+)\\)\\{\\s*\\2=\\s*\\2\\.split\\(""\\)\\s*;'],VARIABLE_PART="[a-zA-Z_\\$][a-zA-Z_0-9]*",VARIABLE_PART_DEFINE=`\\"?${VARIABLE_PART}\\"?`,BEFORE_ACCESS='(?:\\[\\"|\\.)',AFTER_ACCESS='(?:\\"\\]|)',VARIABLE_PART_ACCESS=BEFORE_ACCESS+VARIABLE_PART+AFTER_ACCESS,REVERSE_PART=":function\\(a\\)\\{(?:return )?a\\.reverse\\(\\)\\}",SLICE_PART=":function\\(a,b\\)\\{return a\\.slice\\(b\\)\\}",SPLICE_PART=":function\\(a,b\\)\\{a\\.splice\\(0,b\\)\\}",SWAP_PART=":function\\(a,b\\)\\{var c=a\\[0\\];a\\[0\\]=a\\[b%a\\.length\\];a\\[b(?:%a.length|)\\]=c(?:;return a)?\\}",DECIPHER_REGEXP=`function(?: ${VARIABLE_PART})?\\(a\\)\\{a=a\\.split\\(""\\);\\s*((?:(?:a=)?${VARIABLE_PART}${VARIABLE_PART_ACCESS}\\(a,\\d+\\);)+)return a\\.join\\(""\\)\\}`,HELPER_REGEXP=`var (${VARIABLE_PART})=\\{((?:(?:${VARIABLE_PART_DEFINE}${REVERSE_PART}|${VARIABLE_PART_DEFINE}${SLICE_PART}|${VARIABLE_PART_DEFINE}${SPLICE_PART}|${VARIABLE_PART_DEFINE}${SWAP_PART}),?\\n?)+)\\};`,SCVR="[a-zA-Z0-9$_]",FNR=`${SCVR}+`,AAR="\\[(\\d+)]",N_TRANSFORM_NAME_REGEXPS=[`${SCVR}+="nn"\\[\\+${SCVR}+\\.${SCVR}+],${SCVR}+=${SCVR}+\\.get\\(${SCVR}+\\)\\)&&\\(${SCVR}+=(${SCVR}+)\\[(\\d+)]`,`${SCVR}+="nn"\\[\\+${SCVR}+\\.${SCVR}+],${SCVR}+=${SCVR}+\\.get\\(${SCVR}+\\)\\).+\\|\\|(${SCVR}+)\\(""\\)`,`\\(${SCVR}=String\\.fromCharCode\\(110\\),${SCVR}=${SCVR}\\.get\\(${SCVR}\\)\\)&&\\(${SCVR}=(${FNR})(?:${AAR})?\\(${SCVR}\\)`,`\\.get\\("n"\\)\\)&&\\(${SCVR}=(${FNR})(?:${AAR})?\\(${SCVR}\\)`,'(\\w+).length\\|\\|\\w+\\(""\\)','\\w+.length\\|\\|(\\w+)\\(""\\)'],N_TRANSFORM_REGEXP='function\\(\\s*(\\w+)\\s*\\)\\s*\\{var\\s*(\\w+)=(?:\\1\\.split\\(""\\)|String\\.prototype\\.split\\.call\\(\\1,""\\)),\\s*(\\w+)=(\\[.*?]);\\s*\\3\\[\\d+](.*?try)(\\{.*?})catch\\(\\s*(\\w+)\\s*\\)\\s*\\{\\s*return"enhanced_except_([A-z0-9-]+)"\\s*\\+\\s*\\1\\s*}\\s*return\\s*(\\2\\.join\\(""\\)|Array\\.prototype\\.join\\.call\\(\\2,""\\))};',DECIPHER_ARGUMENT="sig",N_ARGUMENT="ncode",DECIPHER_FUNC_NAME="YBDProjectDecipherFunc",N_TRANSFORM_FUNC_NAME="YBDProjectNTransformFunc",SIGNATURE_TIMESTAMP_REGEX=/signatureTimestamp:(\d+)/g,SHIM=Platform_1.Platform.getShim(),decipherWarning=!1,nTransformWarning=!1;function matchRegex(i,e){let t=e.match(new RegExp(i,"s"));if(!t)throw new Error(`Could not match ${i}`);return t}o(matchRegex,"matchRegex");function matchFirst(i,e){return matchRegex(i,e)[0]}o(matchFirst,"matchFirst");function matchGroup1(i,e){return matchRegex(i,e)[1]}o(matchGroup1,"matchGroup1");function getFunctionName(i,e){let t;for(let r of e)try{t=matchGroup1(r,i);try{t=matchGroup1(`${t.replace(/\$/g,"\\$")}=\\[([a-zA-Z0-9$\\[\\]]{2,})\\]`,i)}catch{}break}catch{continue}if(!t||t.includes("["))throw Error();return t}o(getFunctionName,"getFunctionName");function getExtractFunctions(i,e){for(let t of i)try{let r=t(e);if(!r)continue;return r}catch{continue}return null}o(getExtractFunctions,"getExtractFunctions");function extractDecipherFunc(i){try{let e=matchFirst(HELPER_REGEXP,i),t=matchFirst(DECIPHER_REGEXP,i),r=`var ${DECIPHER_FUNC_NAME}=${t};`,n=`${DECIPHER_FUNC_NAME}(${DECIPHER_ARGUMENT});`;return e+r+n}catch{return null}}o(extractDecipherFunc,"extractDecipherFunc");function extractDecipherWithName(i){try{let e=getFunctionName(i,DECIPHER_NAME_REGEXPS),t=`(${e.replace(/\$/g,"\\$")}function\\([a-zA-Z0-9_]+\\)\\{.+?\\})`,r=`var ${matchGroup1(t,i)};`,n=matchGroup1(";([A-Za-z0-9_\\$]{2,})\\.\\w+\\(",r),s=`(var ${n.replace(/\$/g,"\\$")}=\\{[\\s\\S]+?\\}\\};)`,u=matchGroup1(s,i),c=`${DECIPHER_FUNC_NAME}(${DECIPHER_ARGUMENT});`;return u+r+c}catch{return null}}o(extractDecipherWithName,"extractDecipherWithName");function extractNTransformFunc(i){try{let e=matchFirst(N_TRANSFORM_REGEXP,i),t=`var ${N_TRANSFORM_FUNC_NAME}=${e};`,r=`${N_TRANSFORM_FUNC_NAME}(${N_ARGUMENT});`;return t+r}catch{return null}}o(extractNTransformFunc,"extractNTransformFunc");function extractNTransformWithName(i){try{let e=getFunctionName(i,N_TRANSFORM_NAME_REGEXPS),t=`(${e.replace(/\$/g,"\\$")}=\\s*function([\\S\\s]*?\\}\\s*return (([\\w$]+?\\.join\\(""\\))|(Array\\.prototype\\.join\\.call\\([\\w$]+?,[\\n\\s]*(("")|(\\("",""\\)))\\)))\\s*\\}))`,r=`var ${matchGroup1(t,i)};`,n=`${e}(${N_ARGUMENT});`;return r+n}catch{return null}}o(extractNTransformWithName,"extractNTransformWithName");function runInNewContext(code,contextObject={}){let CONTEXT_VARIABLE=Object.keys(contextObject).map(i=>`let ${i} = contextObject.${i};`).join(`
`),RESULTS_VARIABLE="__result__",FULL_CODE=`
            ${CONTEXT_VARIABLE}
            ${RESULTS_VARIABLE} = (function() {${code}})();
        `;return eval(FULL_CODE),eval(RESULTS_VARIABLE)}o(runInNewContext,"runInNewContext");function getDownloadURL(i,e,t){if(!e)return;let r=o(c=>{var _,T;let f=new URLSearchParams(c),d=((_=f.get("url"))==null?void 0:_.toString())||"";if(!f.get("s"))return d;let m=new URL(decodeURIComponent(d)),E={};return E[DECIPHER_ARGUMENT]=decodeURIComponent(d),m.searchParams.set(((T=f.get("sp"))==null?void 0:T.toString())||"sig",runInNewContext(e,E)),m.toString()},"decipher"),n=o(c=>{let f=new URL(decodeURIComponent(c)),d=f.searchParams.get("n");if(!d||!t)return c;let m={};return m[N_ARGUMENT]=d,f.searchParams.set("n",runInNewContext(t,m)),f.toString()},"nTransform"),s=!i.url,u=i.url||i.signatureCipher||i.cipher;u&&(i.url=n(s?r(u):u),delete i.signatureCipher,delete i.cipher)}o(getDownloadURL,"getDownloadURL");var Fi=class Fi{constructor(){this.decipherFunction=null,this.nTransformFunction=null}static getSignatureTimestamp(e){let t=e.match(SIGNATURE_TIMESTAMP_REGEX);return t?t[0].split(":")[1]:"0"}decipherFormats(e){let t={};return e.forEach(r=>{r&&(getDownloadURL(r,this.decipherFunction,this.nTransformFunction),t[r.url]=r)}),t}getDecipherFunctions(e,t){if(this.decipherFunction)return this.decipherFunction;let r=getExtractFunctions([extractDecipherWithName,extractDecipherFunc],t);return!r&&!decipherWarning&&(Log_1.Logger.warning(`Could not parse decipher function.
Please report this issue with "${e}" in Issues at ${SHIM.info.issuesUrl}.
Stream URL will be missing.`),decipherWarning=!0),this.decipherFunction=r,r}getNTransform(e,t){if(this.nTransformFunction)return this.nTransformFunction;let r=getExtractFunctions([extractNTransformFunc,extractNTransformWithName],t);return!r&&!nTransformWarning&&(Log_1.Logger.warning(`Could not parse n transform function.
Please report this issue with "${e}" in Issues at ${SHIM.info.issuesUrl}.`),nTransformWarning=!0),this.nTransformFunction=r,r}};o(Fi,"Signature");var Signature=Fi;exports.Signature=Signature});var Hi=b(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.getHtml5Player=es;var Qo=Z(),Zo=ki(),qi=Be(),Pt=Te(),Jo=j(),hn=Qo.Platform.getShim().fileCache;function pn(i){let e=i.match(/player\\\/([a-zA-Z0-9]+)\\\//);return e?e[1]:null}o(pn,"getPlayerId");async function es(i){let e=await hn.get("html5Player");if(e&&e.playerUrl)return{playerUrl:e.playerUrl,signatureTimestamp:e.signatureTimestamp,playerBody:e.playerBody};let t=await qi.Fetcher.request(Pt.Url.getIframeApiUrl(),i),r=pn(t),n=r?Pt.Url.getPlayerJsUrl(r):null;if(!n&&i.originalProxy){Jo.Logger.debug("Could not get html5Player using your own proxy. It is retrieved again with its own proxy disabled. (Other requests will not invalidate it.)");let c=await qi.Fetcher.request(Pt.Url.getIframeApiUrl(),{...i,rewriteRequest:void 0,originalProxy:void 0}),f=pn(c);n=f?Pt.Url.getPlayerJsUrl(f):null}let s=n?await qi.Fetcher.request(n,i):"",u={playerUrl:n,signatureTimestamp:n&&Zo.Signature.getSignatureTimestamp(s)||"",playerBody:s||null};return hn.set("html5Player",JSON.stringify(u)),u}o(es,"getHtml5Player")});var yn=b(Nt=>{"use strict";Nt.byteLength=is;Nt.toByteArray=ns;Nt.fromByteArray=ss;var ie=[],W=[],ts=typeof Uint8Array<"u"?Uint8Array:Array,$i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ne=0,gn=$i.length;Ne<gn;++Ne)ie[Ne]=$i[Ne],W[$i.charCodeAt(Ne)]=Ne;var Ne,gn;W[45]=62;W[95]=63;function mn(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}o(mn,"getLens");function is(i){var e=mn(i),t=e[0],r=e[1];return(t+r)*3/4-r}o(is,"byteLength");function rs(i,e,t){return(e+t)*3/4-t}o(rs,"_byteLength");function ns(i){var e,t=mn(i),r=t[0],n=t[1],s=new ts(rs(i,r,n)),u=0,c=n>0?r-4:r,f;for(f=0;f<c;f+=4)e=W[i.charCodeAt(f)]<<18|W[i.charCodeAt(f+1)]<<12|W[i.charCodeAt(f+2)]<<6|W[i.charCodeAt(f+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=e&255;return n===2&&(e=W[i.charCodeAt(f)]<<2|W[i.charCodeAt(f+1)]>>4,s[u++]=e&255),n===1&&(e=W[i.charCodeAt(f)]<<10|W[i.charCodeAt(f+1)]<<4|W[i.charCodeAt(f+2)]>>2,s[u++]=e>>8&255,s[u++]=e&255),s}o(ns,"toByteArray");function as(i){return ie[i>>18&63]+ie[i>>12&63]+ie[i>>6&63]+ie[i&63]}o(as,"tripletToBase64");function os(i,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(i[s]<<16&16711680)+(i[s+1]<<8&65280)+(i[s+2]&255),n.push(as(r));return n.join("")}o(os,"encodeChunk");function ss(i){for(var e,t=i.length,r=t%3,n=[],s=16383,u=0,c=t-r;u<c;u+=s)n.push(os(i,u,u+s>c?c:u+s));return r===1?(e=i[t-1],n.push(ie[e>>2]+ie[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],n.push(ie[e>>10]+ie[e>>4&63]+ie[e<<2&63]+"=")),n.join("")}o(ss,"fromByteArray")});var En=b(Gi=>{Gi.read=function(i,e,t,r,n){var s,u,c=n*8-r-1,f=(1<<c)-1,d=f>>1,m=-7,E=t?n-1:0,_=t?-1:1,T=i[e+E];for(E+=_,s=T&(1<<-m)-1,T>>=-m,m+=c;m>0;s=s*256+i[e+E],E+=_,m-=8);for(u=s&(1<<-m)-1,s>>=-m,m+=r;m>0;u=u*256+i[e+E],E+=_,m-=8);if(s===0)s=1-d;else{if(s===f)return u?NaN:(T?-1:1)*(1/0);u=u+Math.pow(2,r),s=s-d}return(T?-1:1)*u*Math.pow(2,s-r)};Gi.write=function(i,e,t,r,n,s){var u,c,f,d=s*8-n-1,m=(1<<d)-1,E=m>>1,_=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=r?0:s-1,w=r?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,u=m):(u=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-u))<1&&(u--,f*=2),u+E>=1?e+=_/f:e+=_*Math.pow(2,1-E),e*f>=2&&(u++,f/=2),u+E>=m?(c=0,u=m):u+E>=1?(c=(e*f-1)*Math.pow(2,n),u=u+E):(c=e*Math.pow(2,E-1)*Math.pow(2,n),u=0));n>=8;i[t+T]=c&255,T+=w,c/=256,n-=8);for(u=u<<n|c,d+=n;d>0;i[t+T]=u&255,T+=w,u/=256,d-=8);i[t+T-w]|=C*128}});var Ln=b(qe=>{"use strict";var ji=yn(),Fe=En(),bn=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;qe.Buffer=g;qe.SlowBuffer=hs;qe.INSPECT_MAX_BYTES=50;var Dt=2147483647;qe.kMaxLength=Dt;g.TYPED_ARRAY_SUPPORT=ls();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ls(){try{let i=new Uint8Array(1),e={foo:o(function(){return 42},"foo")};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(i,e),i.foo()===42}catch{return!1}}o(ls,"typedArraySupport");Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:o(function(){if(g.isBuffer(this))return this.buffer},"get")});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:o(function(){if(g.isBuffer(this))return this.byteOffset},"get")});function pe(i){if(i>Dt)throw new RangeError('The value "'+i+'" is invalid for option "size"');let e=new Uint8Array(i);return Object.setPrototypeOf(e,g.prototype),e}o(pe,"createBuffer");function g(i,e,t){if(typeof i=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Xi(i)}return An(i,e,t)}o(g,"Buffer");g.poolSize=8192;function An(i,e,t){if(typeof i=="string")return cs(i,e);if(ArrayBuffer.isView(i))return ds(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(re(i,ArrayBuffer)||i&&re(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(i,SharedArrayBuffer)||i&&re(i.buffer,SharedArrayBuffer)))return Yi(i,e,t);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=i.valueOf&&i.valueOf();if(r!=null&&r!==i)return g.from(r,e,t);let n=fs(i);if(n)return n;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return g.from(i[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o(An,"from");g.from=function(i,e,t){return An(i,e,t)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function In(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}o(In,"assertSize");function us(i,e,t){return In(i),i<=0?pe(i):e!==void 0?typeof t=="string"?pe(i).fill(e,t):pe(i).fill(e):pe(i)}o(us,"alloc");g.alloc=function(i,e,t){return us(i,e,t)};function Xi(i){return In(i),pe(i<0?0:zi(i)|0)}o(Xi,"allocUnsafe");g.allocUnsafe=function(i){return Xi(i)};g.allocUnsafeSlow=function(i){return Xi(i)};function cs(i,e){if((typeof e!="string"||e==="")&&(e="utf8"),!g.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Sn(i,e)|0,r=pe(t),n=r.write(i,e);return n!==t&&(r=r.slice(0,n)),r}o(cs,"fromString");function Wi(i){let e=i.length<0?0:zi(i.length)|0,t=pe(e);for(let r=0;r<e;r+=1)t[r]=i[r]&255;return t}o(Wi,"fromArrayLike");function ds(i){if(re(i,Uint8Array)){let e=new Uint8Array(i);return Yi(e.buffer,e.byteOffset,e.byteLength)}return Wi(i)}o(ds,"fromArrayView");function Yi(i,e,t){if(e<0||i.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&t===void 0?r=new Uint8Array(i):t===void 0?r=new Uint8Array(i,e):r=new Uint8Array(i,e,t),Object.setPrototypeOf(r,g.prototype),r}o(Yi,"fromArrayBuffer");function fs(i){if(g.isBuffer(i)){let e=zi(i.length)|0,t=pe(e);return t.length===0||i.copy(t,0,0,e),t}if(i.length!==void 0)return typeof i.length!="number"||Zi(i.length)?pe(0):Wi(i);if(i.type==="Buffer"&&Array.isArray(i.data))return Wi(i.data)}o(fs,"fromObject");function zi(i){if(i>=Dt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Dt.toString(16)+" bytes");return i|0}o(zi,"checked");function hs(i){return+i!=i&&(i=0),g.alloc(+i)}o(hs,"SlowBuffer");g.isBuffer=o(function(e){return e!=null&&e._isBuffer===!0&&e!==g.prototype},"isBuffer");g.compare=o(function(e,t){if(re(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),re(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),!g.isBuffer(e)||!g.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let s=0,u=Math.min(r,n);s<u;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},"compare");g.isEncoding=o(function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding");g.concat=o(function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return g.alloc(0);let r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let n=g.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){let u=e[r];if(re(u,Uint8Array))s+u.length>n.length?(g.isBuffer(u)||(u=g.from(u)),u.copy(n,s)):Uint8Array.prototype.set.call(n,u,s);else if(g.isBuffer(u))u.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=u.length}return n},"concat");function Sn(i,e){if(g.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||re(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let t=i.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&t===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Ki(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Bn(i).length;default:if(n)return r?-1:Ki(i).length;e=(""+e).toLowerCase(),n=!0}}o(Sn,"byteLength");g.byteLength=Sn;function ps(i,e,t){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return Is(this,e,t);case"utf8":case"utf-8":return Cn(this,e,t);case"ascii":return ws(this,e,t);case"latin1":case"binary":return As(this,e,t);case"base64":return Ts(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ss(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),r=!0}}o(ps,"slowToString");g.prototype._isBuffer=!0;function De(i,e,t){let r=i[e];i[e]=i[t],i[t]=r}o(De,"swap");g.prototype.swap16=o(function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)De(this,t,t+1);return this},"swap16");g.prototype.swap32=o(function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)De(this,t,t+3),De(this,t+1,t+2);return this},"swap32");g.prototype.swap64=o(function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)De(this,t,t+7),De(this,t+1,t+6),De(this,t+2,t+5),De(this,t+3,t+4);return this},"swap64");g.prototype.toString=o(function(){let e=this.length;return e===0?"":arguments.length===0?Cn(this,0,e):ps.apply(this,arguments)},"toString");g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=o(function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:g.compare(this,e)===0},"equals");g.prototype.inspect=o(function(){let e="",t=qe.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},"inspect");bn&&(g.prototype[bn]=g.prototype.inspect);g.prototype.compare=o(function(e,t,r,n,s){if(re(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;let u=s-n,c=r-t,f=Math.min(u,c),d=this.slice(n,s),m=e.slice(t,r);for(let E=0;E<f;++E)if(d[E]!==m[E]){u=d[E],c=m[E];break}return u<c?-1:c<u?1:0},"compare");function Rn(i,e,t,r,n){if(i.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Zi(t)&&(t=n?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(n)return-1;t=i.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=g.from(e,r)),g.isBuffer(e))return e.length===0?-1:Tn(i,e,t,r,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):Tn(i,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}o(Rn,"bidirectionalIndexOf");function Tn(i,e,t,r,n){let s=1,u=i.length,c=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(i.length<2||e.length<2)return-1;s=2,u/=2,c/=2,t/=2}function f(m,E){return s===1?m[E]:m.readUInt16BE(E*s)}o(f,"read");let d;if(n){let m=-1;for(d=t;d<u;d++)if(f(i,d)===f(e,m===-1?0:d-m)){if(m===-1&&(m=d),d-m+1===c)return m*s}else m!==-1&&(d-=d-m),m=-1}else for(t+c>u&&(t=u-c),d=t;d>=0;d--){let m=!0;for(let E=0;E<c;E++)if(f(i,d+E)!==f(e,E)){m=!1;break}if(m)return d}return-1}o(Tn,"arrayIndexOf");g.prototype.includes=o(function(e,t,r){return this.indexOf(e,t,r)!==-1},"includes");g.prototype.indexOf=o(function(e,t,r){return Rn(this,e,t,r,!0)},"indexOf");g.prototype.lastIndexOf=o(function(e,t,r){return Rn(this,e,t,r,!1)},"lastIndexOf");function gs(i,e,t,r){t=Number(t)||0;let n=i.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;let s=e.length;r>s/2&&(r=s/2);let u;for(u=0;u<r;++u){let c=parseInt(e.substr(u*2,2),16);if(Zi(c))return u;i[t+u]=c}return u}o(gs,"hexWrite");function ms(i,e,t,r){return Ot(Ki(e,i.length-t),i,t,r)}o(ms,"utf8Write");function ys(i,e,t,r){return Ot(Ns(e),i,t,r)}o(ys,"asciiWrite");function Es(i,e,t,r){return Ot(Bn(e),i,t,r)}o(Es,"base64Write");function bs(i,e,t,r){return Ot(Ds(e,i.length-t),i,t,r)}o(bs,"ucs2Write");g.prototype.write=o(function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(r)?(r=r>>>0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let u=!1;for(;;)switch(n){case"hex":return gs(this,e,t,r);case"utf8":case"utf-8":return ms(this,e,t,r);case"ascii":case"latin1":case"binary":return ys(this,e,t,r);case"base64":return Es(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bs(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},"write");g.prototype.toJSON=o(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function Ts(i,e,t){return e===0&&t===i.length?ji.fromByteArray(i):ji.fromByteArray(i.slice(e,t))}o(Ts,"base64Slice");function Cn(i,e,t){t=Math.min(i.length,t);let r=[],n=e;for(;n<t;){let s=i[n],u=null,c=s>239?4:s>223?3:s>191?2:1;if(n+c<=t){let f,d,m,E;switch(c){case 1:s<128&&(u=s);break;case 2:f=i[n+1],(f&192)===128&&(E=(s&31)<<6|f&63,E>127&&(u=E));break;case 3:f=i[n+1],d=i[n+2],(f&192)===128&&(d&192)===128&&(E=(s&15)<<12|(f&63)<<6|d&63,E>2047&&(E<55296||E>57343)&&(u=E));break;case 4:f=i[n+1],d=i[n+2],m=i[n+3],(f&192)===128&&(d&192)===128&&(m&192)===128&&(E=(s&15)<<18|(f&63)<<12|(d&63)<<6|m&63,E>65535&&E<1114112&&(u=E))}}u===null?(u=65533,c=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|u&1023),r.push(u),n+=c}return _s(r)}o(Cn,"utf8Slice");var _n=4096;function _s(i){let e=i.length;if(e<=_n)return String.fromCharCode.apply(String,i);let t="",r=0;for(;r<e;)t+=String.fromCharCode.apply(String,i.slice(r,r+=_n));return t}o(_s,"decodeCodePointsArray");function ws(i,e,t){let r="";t=Math.min(i.length,t);for(let n=e;n<t;++n)r+=String.fromCharCode(i[n]&127);return r}o(ws,"asciiSlice");function As(i,e,t){let r="";t=Math.min(i.length,t);for(let n=e;n<t;++n)r+=String.fromCharCode(i[n]);return r}o(As,"latin1Slice");function Is(i,e,t){let r=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);let n="";for(let s=e;s<t;++s)n+=Os[i[s]];return n}o(Is,"hexSlice");function Ss(i,e,t){let r=i.slice(e,t),n="";for(let s=0;s<r.length-1;s+=2)n+=String.fromCharCode(r[s]+r[s+1]*256);return n}o(Ss,"utf16leSlice");g.prototype.slice=o(function(e,t){let r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,g.prototype),n},"slice");function M(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}o(M,"checkOffset");g.prototype.readUintLE=g.prototype.readUIntLE=o(function(e,t,r){e=e>>>0,t=t>>>0,r||M(e,t,this.length);let n=this[e],s=1,u=0;for(;++u<t&&(s*=256);)n+=this[e+u]*s;return n},"readUIntLE");g.prototype.readUintBE=g.prototype.readUIntBE=o(function(e,t,r){e=e>>>0,t=t>>>0,r||M(e,t,this.length);let n=this[e+--t],s=1;for(;t>0&&(s*=256);)n+=this[e+--t]*s;return n},"readUIntBE");g.prototype.readUint8=g.prototype.readUInt8=o(function(e,t){return e=e>>>0,t||M(e,1,this.length),this[e]},"readUInt8");g.prototype.readUint16LE=g.prototype.readUInt16LE=o(function(e,t){return e=e>>>0,t||M(e,2,this.length),this[e]|this[e+1]<<8},"readUInt16LE");g.prototype.readUint16BE=g.prototype.readUInt16BE=o(function(e,t){return e=e>>>0,t||M(e,2,this.length),this[e]<<8|this[e+1]},"readUInt16BE");g.prototype.readUint32LE=g.prototype.readUInt32LE=o(function(e,t){return e=e>>>0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},"readUInt32LE");g.prototype.readUint32BE=g.prototype.readUInt32BE=o(function(e,t){return e=e>>>0,t||M(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},"readUInt32BE");g.prototype.readBigUInt64LE=Ae(o(function(e){e=e>>>0,ke(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&at(e,this.length-8);let n=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+r*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))},"readBigUInt64LE"));g.prototype.readBigUInt64BE=Ae(o(function(e){e=e>>>0,ke(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&at(e,this.length-8);let n=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r;return(BigInt(n)<<BigInt(32))+BigInt(s)},"readBigUInt64BE"));g.prototype.readIntLE=o(function(e,t,r){e=e>>>0,t=t>>>0,r||M(e,t,this.length);let n=this[e],s=1,u=0;for(;++u<t&&(s*=256);)n+=this[e+u]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n},"readIntLE");g.prototype.readIntBE=o(function(e,t,r){e=e>>>0,t=t>>>0,r||M(e,t,this.length);let n=t,s=1,u=this[e+--n];for(;n>0&&(s*=256);)u+=this[e+--n]*s;return s*=128,u>=s&&(u-=Math.pow(2,8*t)),u},"readIntBE");g.prototype.readInt8=o(function(e,t){return e=e>>>0,t||M(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},"readInt8");g.prototype.readInt16LE=o(function(e,t){e=e>>>0,t||M(e,2,this.length);let r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r},"readInt16LE");g.prototype.readInt16BE=o(function(e,t){e=e>>>0,t||M(e,2,this.length);let r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r},"readInt16BE");g.prototype.readInt32LE=o(function(e,t){return e=e>>>0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},"readInt32LE");g.prototype.readInt32BE=o(function(e,t){return e=e>>>0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},"readInt32BE");g.prototype.readBigInt64LE=Ae(o(function(e){e=e>>>0,ke(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&at(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)},"readBigInt64LE"));g.prototype.readBigInt64BE=Ae(o(function(e){e=e>>>0,ke(e,"offset");let t=this[e],r=this[e+7];(t===void 0||r===void 0)&&at(e,this.length-8);let n=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r)},"readBigInt64BE"));g.prototype.readFloatLE=o(function(e,t){return e=e>>>0,t||M(e,4,this.length),Fe.read(this,e,!0,23,4)},"readFloatLE");g.prototype.readFloatBE=o(function(e,t){return e=e>>>0,t||M(e,4,this.length),Fe.read(this,e,!1,23,4)},"readFloatBE");g.prototype.readDoubleLE=o(function(e,t){return e=e>>>0,t||M(e,8,this.length),Fe.read(this,e,!0,52,8)},"readDoubleLE");g.prototype.readDoubleBE=o(function(e,t){return e=e>>>0,t||M(e,8,this.length),Fe.read(this,e,!1,52,8)},"readDoubleBE");function V(i,e,t,r,n,s){if(!g.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>i.length)throw new RangeError("Index out of range")}o(V,"checkInt");g.prototype.writeUintLE=g.prototype.writeUIntLE=o(function(e,t,r,n){if(e=+e,t=t>>>0,r=r>>>0,!n){let c=Math.pow(2,8*r)-1;V(this,e,t,r,c,0)}let s=1,u=0;for(this[t]=e&255;++u<r&&(s*=256);)this[t+u]=e/s&255;return t+r},"writeUIntLE");g.prototype.writeUintBE=g.prototype.writeUIntBE=o(function(e,t,r,n){if(e=+e,t=t>>>0,r=r>>>0,!n){let c=Math.pow(2,8*r)-1;V(this,e,t,r,c,0)}let s=r-1,u=1;for(this[t+s]=e&255;--s>=0&&(u*=256);)this[t+s]=e/u&255;return t+r},"writeUIntBE");g.prototype.writeUint8=g.prototype.writeUInt8=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,1,255,0),this[t]=e&255,t+1},"writeUInt8");g.prototype.writeUint16LE=g.prototype.writeUInt16LE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},"writeUInt16LE");g.prototype.writeUint16BE=g.prototype.writeUInt16BE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},"writeUInt16BE");g.prototype.writeUint32LE=g.prototype.writeUInt32LE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},"writeUInt32LE");g.prototype.writeUint32BE=g.prototype.writeUInt32BE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},"writeUInt32BE");function Pn(i,e,t,r,n){vn(e,r,n,i,t,7);let s=Number(e&BigInt(4294967295));i[t++]=s,s=s>>8,i[t++]=s,s=s>>8,i[t++]=s,s=s>>8,i[t++]=s;let u=Number(e>>BigInt(32)&BigInt(4294967295));return i[t++]=u,u=u>>8,i[t++]=u,u=u>>8,i[t++]=u,u=u>>8,i[t++]=u,t}o(Pn,"wrtBigUInt64LE");function Nn(i,e,t,r,n){vn(e,r,n,i,t,7);let s=Number(e&BigInt(4294967295));i[t+7]=s,s=s>>8,i[t+6]=s,s=s>>8,i[t+5]=s,s=s>>8,i[t+4]=s;let u=Number(e>>BigInt(32)&BigInt(4294967295));return i[t+3]=u,u=u>>8,i[t+2]=u,u=u>>8,i[t+1]=u,u=u>>8,i[t]=u,t+8}o(Nn,"wrtBigUInt64BE");g.prototype.writeBigUInt64LE=Ae(o(function(e,t=0){return Pn(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE"));g.prototype.writeBigUInt64BE=Ae(o(function(e,t=0){return Nn(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE"));g.prototype.writeIntLE=o(function(e,t,r,n){if(e=+e,t=t>>>0,!n){let f=Math.pow(2,8*r-1);V(this,e,t,r,f-1,-f)}let s=0,u=1,c=0;for(this[t]=e&255;++s<r&&(u*=256);)e<0&&c===0&&this[t+s-1]!==0&&(c=1),this[t+s]=(e/u>>0)-c&255;return t+r},"writeIntLE");g.prototype.writeIntBE=o(function(e,t,r,n){if(e=+e,t=t>>>0,!n){let f=Math.pow(2,8*r-1);V(this,e,t,r,f-1,-f)}let s=r-1,u=1,c=0;for(this[t+s]=e&255;--s>=0&&(u*=256);)e<0&&c===0&&this[t+s+1]!==0&&(c=1),this[t+s]=(e/u>>0)-c&255;return t+r},"writeIntBE");g.prototype.writeInt8=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},"writeInt8");g.prototype.writeInt16LE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},"writeInt16LE");g.prototype.writeInt16BE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},"writeInt16BE");g.prototype.writeInt32LE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},"writeInt32LE");g.prototype.writeInt32BE=o(function(e,t,r){return e=+e,t=t>>>0,r||V(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},"writeInt32BE");g.prototype.writeBigInt64LE=Ae(o(function(e,t=0){return Pn(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE"));g.prototype.writeBigInt64BE=Ae(o(function(e,t=0){return Nn(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function Dn(i,e,t,r,n,s){if(t+r>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}o(Dn,"checkIEEE754");function On(i,e,t,r,n){return e=+e,t=t>>>0,n||Dn(i,e,t,4,34028234663852886e22,-34028234663852886e22),Fe.write(i,e,t,r,23,4),t+4}o(On,"writeFloat");g.prototype.writeFloatLE=o(function(e,t,r){return On(this,e,t,!0,r)},"writeFloatLE");g.prototype.writeFloatBE=o(function(e,t,r){return On(this,e,t,!1,r)},"writeFloatBE");function Mn(i,e,t,r,n){return e=+e,t=t>>>0,n||Dn(i,e,t,8,17976931348623157e292,-17976931348623157e292),Fe.write(i,e,t,r,52,8),t+8}o(Mn,"writeDouble");g.prototype.writeDoubleLE=o(function(e,t,r){return Mn(this,e,t,!0,r)},"writeDoubleLE");g.prototype.writeDoubleBE=o(function(e,t,r){return Mn(this,e,t,!1,r)},"writeDoubleBE");g.prototype.copy=o(function(e,t,r,n){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let s=n-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),s},"copy");g.prototype.fill=o(function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!g.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let u=e.charCodeAt(0);(n==="utf8"&&u<128||n==="latin1")&&(e=u)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<r;++s)this[s]=e;else{let u=g.isBuffer(e)?e:g.from(e,n),c=u.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=u[s%c]}return this},"fill");var xe={};function Qi(i,e,t){var r;xe[i]=(r=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}},o(r,"NodeError"),r)}o(Qi,"E");Qi("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Qi("ERR_INVALID_ARG_TYPE",function(i,e){return`The "${i}" argument must be of type number. Received type ${typeof e}`},TypeError);Qi("ERR_OUT_OF_RANGE",function(i,e,t){let r=`The value of "${i}" is out of range.`,n=t;return Number.isInteger(t)&&Math.abs(t)>2**32?n=wn(String(t)):typeof t=="bigint"&&(n=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(n=wn(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r},RangeError);function wn(i){let e="",t=i.length,r=i[0]==="-"?1:0;for(;t>=r+4;t-=3)e=`_${i.slice(t-3,t)}${e}`;return`${i.slice(0,t)}${e}`}o(wn,"addNumericalSeparator");function Rs(i,e,t){ke(e,"offset"),(i[e]===void 0||i[e+t]===void 0)&&at(e,i.length-(t+1))}o(Rs,"checkBounds");function vn(i,e,t,r,n,s){if(i>t||i<e){let u=typeof e=="bigint"?"n":"",c;throw s>3?e===0||e===BigInt(0)?c=`>= 0${u} and < 2${u} ** ${(s+1)*8}${u}`:c=`>= -(2${u} ** ${(s+1)*8-1}${u}) and < 2 ** ${(s+1)*8-1}${u}`:c=`>= ${e}${u} and <= ${t}${u}`,new xe.ERR_OUT_OF_RANGE("value",c,i)}Rs(r,n,s)}o(vn,"checkIntBI");function ke(i,e){if(typeof i!="number")throw new xe.ERR_INVALID_ARG_TYPE(e,"number",i)}o(ke,"validateNumber");function at(i,e,t){throw Math.floor(i)!==i?(ke(i,t),new xe.ERR_OUT_OF_RANGE(t||"offset","an integer",i)):e<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,i)}o(at,"boundsError");var Cs=/[^+/0-9A-Za-z-_]/g;function Ps(i){if(i=i.split("=")[0],i=i.trim().replace(Cs,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}o(Ps,"base64clean");function Ki(i,e){e=e||1/0;let t,r=i.length,n=null,s=[];for(let u=0;u<r;++u){if(t=i.charCodeAt(u),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(u+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}o(Ki,"utf8ToBytes");function Ns(i){let e=[];for(let t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}o(Ns,"asciiToBytes");function Ds(i,e){let t,r,n,s=[];for(let u=0;u<i.length&&!((e-=2)<0);++u)t=i.charCodeAt(u),r=t>>8,n=t%256,s.push(n),s.push(r);return s}o(Ds,"utf16leToBytes");function Bn(i){return ji.toByteArray(Ps(i))}o(Bn,"base64ToBytes");function Ot(i,e,t,r){let n;for(n=0;n<r&&!(n+t>=e.length||n>=i.length);++n)e[n+t]=i[n];return n}o(Ot,"blitBuffer");function re(i,e){return i instanceof e||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===e.name}o(re,"isInstance");function Zi(i){return i!==i}o(Zi,"numberIsNaN");var Os=function(){let i="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let r=t*16;for(let n=0;n<16;++n)e[r+n]=i[t]+i[n]}return e}();function Ae(i){return typeof BigInt>"u"?Ms:i}o(Ae,"defineBigIntMethod");function Ms(){throw new Error("BigInt not supported")}o(Ms,"BufferBigIntNotDefined")});var Fn=b((Ji,xn)=>{var Mt=Ln(),ne=Mt.Buffer;function Un(i,e){for(var t in i)e[t]=i[t]}o(Un,"copyProps");ne.from&&ne.alloc&&ne.allocUnsafe&&ne.allocUnsafeSlow?xn.exports=Mt:(Un(Mt,Ji),Ji.Buffer=Oe);function Oe(i,e,t){return ne(i,e,t)}o(Oe,"SafeBuffer");Oe.prototype=Object.create(ne.prototype);Un(ne,Oe);Oe.from=function(i,e,t){if(typeof i=="number")throw new TypeError("Argument must not be a number");return ne(i,e,t)};Oe.alloc=function(i,e,t){if(typeof i!="number")throw new TypeError("Argument must be a number");var r=ne(i);return e!==void 0?typeof t=="string"?r.fill(e,t):r.fill(e):r.fill(0),r};Oe.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return ne(i)};Oe.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return Mt.SlowBuffer(i)}});var Vn=b(qn=>{"use strict";var tr=Fn().Buffer,kn=tr.isEncoding||function(i){switch(i=""+i,i&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function vs(i){if(!i)return"utf8";for(var e;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(e)return;i=(""+i).toLowerCase(),e=!0}}o(vs,"_normalizeEncoding");function Bs(i){var e=vs(i);if(typeof e!="string"&&(tr.isEncoding===kn||!kn(i)))throw new Error("Unknown encoding: "+i);return e||i}o(Bs,"normalizeEncoding");qn.StringDecoder=ot;function ot(i){this.encoding=Bs(i);var e;switch(this.encoding){case"utf16le":this.text=qs,this.end=Vs,e=4;break;case"utf8":this.fillLast=xs,e=4;break;case"base64":this.text=Hs,this.end=$s,e=3;break;default:this.write=Gs,this.end=js;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=tr.allocUnsafe(e)}o(ot,"StringDecoder");ot.prototype.write=function(i){if(i.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(i),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<i.length?e?e+this.text(i,t):this.text(i,t):e||""};ot.prototype.end=ks;ot.prototype.text=Fs;ot.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length};function er(i){return i<=127?0:i>>5===6?2:i>>4===14?3:i>>3===30?4:i>>6===2?-1:-2}o(er,"utf8CheckByte");function Ls(i,e,t){var r=e.length-1;if(r<t)return 0;var n=er(e[r]);return n>=0?(n>0&&(i.lastNeed=n-1),n):--r<t||n===-2?0:(n=er(e[r]),n>=0?(n>0&&(i.lastNeed=n-2),n):--r<t||n===-2?0:(n=er(e[r]),n>=0?(n>0&&(n===2?n=0:i.lastNeed=n-3),n):0))}o(Ls,"utf8CheckIncomplete");function Us(i,e,t){if((e[0]&192)!==128)return i.lastNeed=0,"\uFFFD";if(i.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return i.lastNeed=1,"\uFFFD";if(i.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return i.lastNeed=2,"\uFFFD"}}o(Us,"utf8CheckExtraBytes");function xs(i){var e=this.lastTotal-this.lastNeed,t=Us(this,i,e);if(t!==void 0)return t;if(this.lastNeed<=i.length)return i.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,e,0,i.length),this.lastNeed-=i.length}o(xs,"utf8FillLast");function Fs(i,e){var t=Ls(this,i,e);if(!this.lastNeed)return i.toString("utf8",e);this.lastTotal=t;var r=i.length-(t-this.lastNeed);return i.copy(this.lastChar,0,r),i.toString("utf8",e,r)}o(Fs,"utf8Text");function ks(i){var e=i&&i.length?this.write(i):"";return this.lastNeed?e+"\uFFFD":e}o(ks,"utf8End");function qs(i,e){if((i.length-e)%2===0){var t=i.toString("utf16le",e);if(t){var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",e,i.length-1)}o(qs,"utf16Text");function Vs(i){var e=i&&i.length?this.write(i):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}o(Vs,"utf16End");function Hs(i,e){var t=(i.length-e)%3;return t===0?i.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",e,i.length-t))}o(Hs,"base64Text");function $s(i){var e=i&&i.length?this.write(i):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}o($s,"base64End");function Gs(i){return i.toString(this.encoding)}o(Gs,"simpleWrite");function js(i){return i&&i.length?this.write(i):""}o(js,"simpleEnd")});var Hn=b(vt=>{(function(i){i.parser=function(l,a){return new t(l,a)},i.SAXParser=t,i.SAXStream=d,i.createStream=f,i.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(l,a){if(!(this instanceof t))return new t(l,a);var y=this;n(y),y.q=y.c="",y.bufferCheckPosition=i.MAX_BUFFER_LENGTH,y.opt=a||{},y.opt.lowercase=y.opt.lowercase||y.opt.lowercasetags,y.looseCase=y.opt.lowercase?"toLowerCase":"toUpperCase",y.tags=[],y.closed=y.closedRoot=y.sawRoot=!1,y.tag=y.error=null,y.strict=!!l,y.noscript=!!(l||y.opt.noscript),y.state=p.BEGIN,y.strictEntities=y.opt.strictEntities,y.ENTITIES=y.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),y.attribList=[],y.opt.xmlns&&(y.ns=Object.create(w)),y.opt.unquotedAttributeValues===void 0&&(y.opt.unquotedAttributeValues=!l),y.trackPosition=y.opt.position!==!1,y.trackPosition&&(y.position=y.line=y.column=0),z(y,"onready")}o(t,"SAXParser"),Object.create||(Object.create=function(l){function a(){}o(a,"F"),a.prototype=l;var y=new a;return y}),Object.keys||(Object.keys=function(l){var a=[];for(var y in l)l.hasOwnProperty(y)&&a.push(y);return a});function r(l){for(var a=Math.max(i.MAX_BUFFER_LENGTH,10),y=0,h=0,A=e.length;h<A;h++){var D=l[e[h]].length;if(D>a)switch(e[h]){case"textNode":Q(l);break;case"cdata":S(l,"oncdata",l.cdata),l.cdata="";break;case"script":S(l,"onscript",l.script),l.script="";break;default:x(l,"Max buffer length exceeded: "+e[h])}y=Math.max(y,D)}var O=i.MAX_BUFFER_LENGTH-y;l.bufferCheckPosition=O+l.position}o(r,"checkBufferLength");function n(l){for(var a=0,y=e.length;a<y;a++)l[e[a]]=""}o(n,"clearBuffers");function s(l){Q(l),l.cdata!==""&&(S(l,"oncdata",l.cdata),l.cdata=""),l.script!==""&&(S(l,"onscript",l.script),l.script="")}o(s,"flushBuffers"),t.prototype={end:o(function(){We(this)},"end"),write:Wa,resume:o(function(){return this.error=null,this},"resume"),close:o(function(){return this.write(null)},"close"),flush:o(function(){s(this)},"flush")};var u;try{u=Xa("stream").Stream}catch{u=o(function(){},"Stream")}u||(u=o(function(){},"Stream"));var c=i.EVENTS.filter(function(l){return l!=="error"&&l!=="end"});function f(l,a){return new d(l,a)}o(f,"createStream");function d(l,a){if(!(this instanceof d))return new d(l,a);u.apply(this),this._parser=new t(l,a),this.writable=!0,this.readable=!0;var y=this;this._parser.onend=function(){y.emit("end")},this._parser.onerror=function(h){y.emit("error",h),y._parser.error=null},this._decoder=null,c.forEach(function(h){Object.defineProperty(y,"on"+h,{get:o(function(){return y._parser["on"+h]},"get"),set:o(function(A){if(!A)return y.removeAllListeners(h),y._parser["on"+h]=A,A;y.on(h,A)},"set"),enumerable:!0,configurable:!1})})}o(d,"SAXStream"),d.prototype=Object.create(u.prototype,{constructor:{value:d}}),d.prototype.write=function(l){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(l)){if(!this._decoder){var a=Vn().StringDecoder;this._decoder=new a("utf8")}l=this._decoder.write(l)}return this._parser.write(l.toString()),this.emit("data",l),!0},d.prototype.end=function(l){return l&&l.length&&this.write(l),this._parser.end(),!0},d.prototype.on=function(l,a){var y=this;return!y._parser["on"+l]&&c.indexOf(l)!==-1&&(y._parser["on"+l]=function(){var h=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);h.splice(0,0,l),y.emit.apply(y,h)}),u.prototype.on.call(y,l,a)};var m="[CDATA[",E="DOCTYPE",_="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/2000/xmlns/",w={xml:_,xmlns:T},C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,K=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function R(l){return l===" "||l===`
`||l==="\r"||l==="	"}o(R,"isWhitespace");function B(l){return l==='"'||l==="'"}o(B,"isQuote");function se(l){return l===">"||R(l)}o(se,"isAttribEnd");function G(l,a){return l.test(a)}o(G,"isMatch");function je(l,a){return!G(l,a)}o(je,"notMatch");var p=0;i.STATE={BEGIN:p++,BEGIN_WHITESPACE:p++,TEXT:p++,TEXT_ENTITY:p++,OPEN_WAKA:p++,SGML_DECL:p++,SGML_DECL_QUOTED:p++,DOCTYPE:p++,DOCTYPE_QUOTED:p++,DOCTYPE_DTD:p++,DOCTYPE_DTD_QUOTED:p++,COMMENT_STARTING:p++,COMMENT:p++,COMMENT_ENDING:p++,COMMENT_ENDED:p++,CDATA:p++,CDATA_ENDING:p++,CDATA_ENDING_2:p++,PROC_INST:p++,PROC_INST_BODY:p++,PROC_INST_ENDING:p++,OPEN_TAG:p++,OPEN_TAG_SLASH:p++,ATTRIB:p++,ATTRIB_NAME:p++,ATTRIB_NAME_SAW_WHITE:p++,ATTRIB_VALUE:p++,ATTRIB_VALUE_QUOTED:p++,ATTRIB_VALUE_CLOSED:p++,ATTRIB_VALUE_UNQUOTED:p++,ATTRIB_VALUE_ENTITY_Q:p++,ATTRIB_VALUE_ENTITY_U:p++,CLOSE_TAG:p++,CLOSE_TAG_SAW_WHITE:p++,SCRIPT:p++,SCRIPT_ENDING:p++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach(function(l){var a=i.ENTITIES[l],y=typeof a=="number"?String.fromCharCode(a):a;i.ENTITIES[l]=y});for(var Re in i.STATE)i.STATE[i.STATE[Re]]=Re;p=i.STATE;function z(l,a,y){l[a]&&l[a](y)}o(z,"emit");function S(l,a,y){l.textNode&&Q(l),z(l,a,y)}o(S,"emitNode");function Q(l){l.textNode=U(l.opt,l.textNode),l.textNode&&z(l,"ontext",l.textNode),l.textNode=""}o(Q,"closeText");function U(l,a){return l.trim&&(a=a.trim()),l.normalize&&(a=a.replace(/\s+/g," ")),a}o(U,"textopts");function x(l,a){return Q(l),l.trackPosition&&(a+=`
Line: `+l.line+`
Column: `+l.column+`
Char: `+l.c),a=new Error(a),l.error=a,z(l,"onerror",a),l}o(x,"error");function We(l){return l.sawRoot&&!l.closedRoot&&I(l,"Unclosed root tag"),l.state!==p.BEGIN&&l.state!==p.BEGIN_WHITESPACE&&l.state!==p.TEXT&&x(l,"Unexpected end"),Q(l),l.c="",l.closed=!0,z(l,"onend"),t.call(l,l.strict,l.opt),l}o(We,"end");function I(l,a){if(typeof l!="object"||!(l instanceof t))throw new Error("bad call to strictFail");l.strict&&x(l,a)}o(I,"strictFail");function Ga(l){l.strict||(l.tagName=l.tagName[l.looseCase]());var a=l.tags[l.tags.length-1]||l,y=l.tag={name:l.tagName,attributes:{}};l.opt.xmlns&&(y.ns=a.ns),l.attribList.length=0,S(l,"onopentagstart",y)}o(Ga,"newTag");function Ht(l,a){var y=l.indexOf(":"),h=y<0?["",l]:l.split(":"),A=h[0],D=h[1];return a&&l==="xmlns"&&(A="xmlns",D=""),{prefix:A,local:D}}o(Ht,"qname");function $t(l){if(l.strict||(l.attribName=l.attribName[l.looseCase]()),l.attribList.indexOf(l.attribName)!==-1||l.tag.attributes.hasOwnProperty(l.attribName)){l.attribName=l.attribValue="";return}if(l.opt.xmlns){var a=Ht(l.attribName,!0),y=a.prefix,h=a.local;if(y==="xmlns")if(h==="xml"&&l.attribValue!==_)I(l,"xml: prefix must be bound to "+_+`
Actual: `+l.attribValue);else if(h==="xmlns"&&l.attribValue!==T)I(l,"xmlns: prefix must be bound to "+T+`
Actual: `+l.attribValue);else{var A=l.tag,D=l.tags[l.tags.length-1]||l;A.ns===D.ns&&(A.ns=Object.create(D.ns)),A.ns[h]=l.attribValue}l.attribList.push([l.attribName,l.attribValue])}else l.tag.attributes[l.attribName]=l.attribValue,S(l,"onattribute",{name:l.attribName,value:l.attribValue});l.attribName=l.attribValue=""}o($t,"attrib");function Ce(l,a){if(l.opt.xmlns){var y=l.tag,h=Ht(l.tagName);y.prefix=h.prefix,y.local=h.local,y.uri=y.ns[h.prefix]||"",y.prefix&&!y.uri&&(I(l,"Unbound namespace prefix: "+JSON.stringify(l.tagName)),y.uri=h.prefix);var A=l.tags[l.tags.length-1]||l;y.ns&&A.ns!==y.ns&&Object.keys(y.ns).forEach(function(kr){S(l,"onopennamespace",{prefix:kr,uri:y.ns[kr]})});for(var D=0,O=l.attribList.length;D<O;D++){var F=l.attribList[D],k=F[0],ve=F[1],L=Ht(k,!0),le=L.prefix,Ya=L.local,Fr=le===""?"":y.ns[le]||"",jt={name:k,value:ve,prefix:le,local:Ya,uri:Fr};le&&le!=="xmlns"&&!Fr&&(I(l,"Unbound namespace prefix: "+JSON.stringify(le)),jt.uri=le),l.tag.attributes[k]=jt,S(l,"onattribute",jt)}l.attribList.length=0}l.tag.isSelfClosing=!!a,l.sawRoot=!0,l.tags.push(l.tag),S(l,"onopentag",l.tag),a||(!l.noscript&&l.tagName.toLowerCase()==="script"?l.state=p.SCRIPT:l.state=p.TEXT,l.tag=null,l.tagName=""),l.attribName=l.attribValue="",l.attribList.length=0}o(Ce,"openTag");function Gt(l){if(!l.tagName){I(l,"Weird empty close tag."),l.textNode+="</>",l.state=p.TEXT;return}if(l.script){if(l.tagName!=="script"){l.script+="</"+l.tagName+">",l.tagName="",l.state=p.SCRIPT;return}S(l,"onscript",l.script),l.script=""}var a=l.tags.length,y=l.tagName;l.strict||(y=y[l.looseCase]());for(var h=y;a--;){var A=l.tags[a];if(A.name!==h)I(l,"Unexpected close tag");else break}if(a<0){I(l,"Unmatched closing tag: "+l.tagName),l.textNode+="</"+l.tagName+">",l.state=p.TEXT;return}l.tagName=y;for(var D=l.tags.length;D-- >a;){var O=l.tag=l.tags.pop();l.tagName=l.tag.name,S(l,"onclosetag",l.tagName);var F={};for(var k in O.ns)F[k]=O.ns[k];var ve=l.tags[l.tags.length-1]||l;l.opt.xmlns&&O.ns!==ve.ns&&Object.keys(O.ns).forEach(function(L){var le=O.ns[L];S(l,"onclosenamespace",{prefix:L,uri:le})})}a===0&&(l.closedRoot=!0),l.tagName=l.attribValue=l.attribName="",l.attribList.length=0,l.state=p.TEXT}o(Gt,"closeTag");function ja(l){var a=l.entity,y=a.toLowerCase(),h,A="";return l.ENTITIES[a]?l.ENTITIES[a]:l.ENTITIES[y]?l.ENTITIES[y]:(a=y,a.charAt(0)==="#"&&(a.charAt(1)==="x"?(a=a.slice(2),h=parseInt(a,16),A=h.toString(16)):(a=a.slice(1),h=parseInt(a,10),A=h.toString(10))),a=a.replace(/^0+/,""),isNaN(h)||A.toLowerCase()!==a?(I(l,"Invalid character entity"),"&"+l.entity+";"):String.fromCodePoint(h))}o(ja,"parseEntity");function Ur(l,a){a==="<"?(l.state=p.OPEN_WAKA,l.startTagPosition=l.position):R(a)||(I(l,"Non-whitespace before first tag."),l.textNode=a,l.state=p.TEXT)}o(Ur,"beginWhiteSpace");function xr(l,a){var y="";return a<l.length&&(y=l.charAt(a)),y}o(xr,"charAt");function Wa(l){var a=this;if(this.error)throw this.error;if(a.closed)return x(a,"Cannot write after close. Assign an onready handler.");if(l===null)return We(a);typeof l=="object"&&(l=l.toString());for(var y=0,h="";h=xr(l,y++),a.c=h,!!h;)switch(a.trackPosition&&(a.position++,h===`
`?(a.line++,a.column=0):a.column++),a.state){case p.BEGIN:if(a.state=p.BEGIN_WHITESPACE,h==="\uFEFF")continue;Ur(a,h);continue;case p.BEGIN_WHITESPACE:Ur(a,h);continue;case p.TEXT:if(a.sawRoot&&!a.closedRoot){for(var A=y-1;h&&h!=="<"&&h!=="&";)h=xr(l,y++),h&&a.trackPosition&&(a.position++,h===`
`?(a.line++,a.column=0):a.column++);a.textNode+=l.substring(A,y-1)}h==="<"&&!(a.sawRoot&&a.closedRoot&&!a.strict)?(a.state=p.OPEN_WAKA,a.startTagPosition=a.position):(!R(h)&&(!a.sawRoot||a.closedRoot)&&I(a,"Text data outside of root node."),h==="&"?a.state=p.TEXT_ENTITY:a.textNode+=h);continue;case p.SCRIPT:h==="<"?a.state=p.SCRIPT_ENDING:a.script+=h;continue;case p.SCRIPT_ENDING:h==="/"?a.state=p.CLOSE_TAG:(a.script+="<"+h,a.state=p.SCRIPT);continue;case p.OPEN_WAKA:if(h==="!")a.state=p.SGML_DECL,a.sgmlDecl="";else if(!R(h))if(G(C,h))a.state=p.OPEN_TAG,a.tagName=h;else if(h==="/")a.state=p.CLOSE_TAG,a.tagName="";else if(h==="?")a.state=p.PROC_INST,a.procInstName=a.procInstBody="";else{if(I(a,"Unencoded <"),a.startTagPosition+1<a.position){var D=a.position-a.startTagPosition;h=new Array(D).join(" ")+h}a.textNode+="<"+h,a.state=p.TEXT}continue;case p.SGML_DECL:if(a.sgmlDecl+h==="--"){a.state=p.COMMENT,a.comment="",a.sgmlDecl="";continue}a.doctype&&a.doctype!==!0&&a.sgmlDecl?(a.state=p.DOCTYPE_DTD,a.doctype+="<!"+a.sgmlDecl+h,a.sgmlDecl=""):(a.sgmlDecl+h).toUpperCase()===m?(S(a,"onopencdata"),a.state=p.CDATA,a.sgmlDecl="",a.cdata=""):(a.sgmlDecl+h).toUpperCase()===E?(a.state=p.DOCTYPE,(a.doctype||a.sawRoot)&&I(a,"Inappropriately located doctype declaration"),a.doctype="",a.sgmlDecl=""):h===">"?(S(a,"onsgmldeclaration",a.sgmlDecl),a.sgmlDecl="",a.state=p.TEXT):(B(h)&&(a.state=p.SGML_DECL_QUOTED),a.sgmlDecl+=h);continue;case p.SGML_DECL_QUOTED:h===a.q&&(a.state=p.SGML_DECL,a.q=""),a.sgmlDecl+=h;continue;case p.DOCTYPE:h===">"?(a.state=p.TEXT,S(a,"ondoctype",a.doctype),a.doctype=!0):(a.doctype+=h,h==="["?a.state=p.DOCTYPE_DTD:B(h)&&(a.state=p.DOCTYPE_QUOTED,a.q=h));continue;case p.DOCTYPE_QUOTED:a.doctype+=h,h===a.q&&(a.q="",a.state=p.DOCTYPE);continue;case p.DOCTYPE_DTD:h==="]"?(a.doctype+=h,a.state=p.DOCTYPE):h==="<"?(a.state=p.OPEN_WAKA,a.startTagPosition=a.position):B(h)?(a.doctype+=h,a.state=p.DOCTYPE_DTD_QUOTED,a.q=h):a.doctype+=h;continue;case p.DOCTYPE_DTD_QUOTED:a.doctype+=h,h===a.q&&(a.state=p.DOCTYPE_DTD,a.q="");continue;case p.COMMENT:h==="-"?a.state=p.COMMENT_ENDING:a.comment+=h;continue;case p.COMMENT_ENDING:h==="-"?(a.state=p.COMMENT_ENDED,a.comment=U(a.opt,a.comment),a.comment&&S(a,"oncomment",a.comment),a.comment=""):(a.comment+="-"+h,a.state=p.COMMENT);continue;case p.COMMENT_ENDED:h!==">"?(I(a,"Malformed comment"),a.comment+="--"+h,a.state=p.COMMENT):a.doctype&&a.doctype!==!0?a.state=p.DOCTYPE_DTD:a.state=p.TEXT;continue;case p.CDATA:h==="]"?a.state=p.CDATA_ENDING:a.cdata+=h;continue;case p.CDATA_ENDING:h==="]"?a.state=p.CDATA_ENDING_2:(a.cdata+="]"+h,a.state=p.CDATA);continue;case p.CDATA_ENDING_2:h===">"?(a.cdata&&S(a,"oncdata",a.cdata),S(a,"onclosecdata"),a.cdata="",a.state=p.TEXT):h==="]"?a.cdata+="]":(a.cdata+="]]"+h,a.state=p.CDATA);continue;case p.PROC_INST:h==="?"?a.state=p.PROC_INST_ENDING:R(h)?a.state=p.PROC_INST_BODY:a.procInstName+=h;continue;case p.PROC_INST_BODY:if(!a.procInstBody&&R(h))continue;h==="?"?a.state=p.PROC_INST_ENDING:a.procInstBody+=h;continue;case p.PROC_INST_ENDING:h===">"?(S(a,"onprocessinginstruction",{name:a.procInstName,body:a.procInstBody}),a.procInstName=a.procInstBody="",a.state=p.TEXT):(a.procInstBody+="?"+h,a.state=p.PROC_INST_BODY);continue;case p.OPEN_TAG:G($,h)?a.tagName+=h:(Ga(a),h===">"?Ce(a):h==="/"?a.state=p.OPEN_TAG_SLASH:(R(h)||I(a,"Invalid character in tag name"),a.state=p.ATTRIB));continue;case p.OPEN_TAG_SLASH:h===">"?(Ce(a,!0),Gt(a)):(I(a,"Forward-slash in opening tag not followed by >"),a.state=p.ATTRIB);continue;case p.ATTRIB:if(R(h))continue;h===">"?Ce(a):h==="/"?a.state=p.OPEN_TAG_SLASH:G(C,h)?(a.attribName=h,a.attribValue="",a.state=p.ATTRIB_NAME):I(a,"Invalid attribute name");continue;case p.ATTRIB_NAME:h==="="?a.state=p.ATTRIB_VALUE:h===">"?(I(a,"Attribute without value"),a.attribValue=a.attribName,$t(a),Ce(a)):R(h)?a.state=p.ATTRIB_NAME_SAW_WHITE:G($,h)?a.attribName+=h:I(a,"Invalid attribute name");continue;case p.ATTRIB_NAME_SAW_WHITE:if(h==="=")a.state=p.ATTRIB_VALUE;else{if(R(h))continue;I(a,"Attribute without value"),a.tag.attributes[a.attribName]="",a.attribValue="",S(a,"onattribute",{name:a.attribName,value:""}),a.attribName="",h===">"?Ce(a):G(C,h)?(a.attribName=h,a.state=p.ATTRIB_NAME):(I(a,"Invalid attribute name"),a.state=p.ATTRIB)}continue;case p.ATTRIB_VALUE:if(R(h))continue;B(h)?(a.q=h,a.state=p.ATTRIB_VALUE_QUOTED):(a.opt.unquotedAttributeValues||x(a,"Unquoted attribute value"),a.state=p.ATTRIB_VALUE_UNQUOTED,a.attribValue=h);continue;case p.ATTRIB_VALUE_QUOTED:if(h!==a.q){h==="&"?a.state=p.ATTRIB_VALUE_ENTITY_Q:a.attribValue+=h;continue}$t(a),a.q="",a.state=p.ATTRIB_VALUE_CLOSED;continue;case p.ATTRIB_VALUE_CLOSED:R(h)?a.state=p.ATTRIB:h===">"?Ce(a):h==="/"?a.state=p.OPEN_TAG_SLASH:G(C,h)?(I(a,"No whitespace between attributes"),a.attribName=h,a.attribValue="",a.state=p.ATTRIB_NAME):I(a,"Invalid attribute name");continue;case p.ATTRIB_VALUE_UNQUOTED:if(!se(h)){h==="&"?a.state=p.ATTRIB_VALUE_ENTITY_U:a.attribValue+=h;continue}$t(a),h===">"?Ce(a):a.state=p.ATTRIB;continue;case p.CLOSE_TAG:if(a.tagName)h===">"?Gt(a):G($,h)?a.tagName+=h:a.script?(a.script+="</"+a.tagName,a.tagName="",a.state=p.SCRIPT):(R(h)||I(a,"Invalid tagname in closing tag"),a.state=p.CLOSE_TAG_SAW_WHITE);else{if(R(h))continue;je(C,h)?a.script?(a.script+="</"+h,a.state=p.SCRIPT):I(a,"Invalid tagname in closing tag."):a.tagName=h}continue;case p.CLOSE_TAG_SAW_WHITE:if(R(h))continue;h===">"?Gt(a):I(a,"Invalid characters in closing tag");continue;case p.TEXT_ENTITY:case p.ATTRIB_VALUE_ENTITY_Q:case p.ATTRIB_VALUE_ENTITY_U:var O,F;switch(a.state){case p.TEXT_ENTITY:O=p.TEXT,F="textNode";break;case p.ATTRIB_VALUE_ENTITY_Q:O=p.ATTRIB_VALUE_QUOTED,F="attribValue";break;case p.ATTRIB_VALUE_ENTITY_U:O=p.ATTRIB_VALUE_UNQUOTED,F="attribValue";break}if(h===";"){var k=ja(a);a.opt.unparsedEntities&&!Object.values(i.XML_ENTITIES).includes(k)?(a.entity="",a.state=O,a.write(k)):(a[F]+=k,a.entity="",a.state=O)}else G(a.entity.length?K:v,h)?a.entity+=h:(I(a,"Invalid character in entity name"),a[F]+="&"+a.entity+h,a.entity="",a.state=O);continue;default:throw new Error(a,"Unknown state: "+a.state)}return a.position>=a.bufferCheckPosition&&r(a),a}o(Wa,"write");String.fromCodePoint||function(){var l=String.fromCharCode,a=Math.floor,y=o(function(){var h=16384,A=[],D,O,F=-1,k=arguments.length;if(!k)return"";for(var ve="";++F<k;){var L=Number(arguments[F]);if(!isFinite(L)||L<0||L>1114111||a(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?A.push(L):(L-=65536,D=(L>>10)+55296,O=L%1024+56320,A.push(D,O)),(F+1===k||A.length>h)&&(ve+=l.apply(null,A),A.length=0)}return ve},"fromCodePoint");Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:y,configurable:!0,writable:!0}):String.fromCodePoint=y}()})(typeof vt>"u"?vt.sax={}:vt)});var nr=b(Ve=>{"use strict";var Ws=Ve&&Ve.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.FormatParser=void 0;var Ys=Ws(Hn()),$n=Be(),Gn=Te(),rr=class rr{static parseFormats(e){let t=[];return e&&e.streamingData&&(t=t.concat(e.streamingData.formats).concat(e.streamingData.adaptiveFormats)),t}static async getM3U8(e,t){let r=new URL(e,Gn.Url.getBaseUrl()),n=await $n.Fetcher.request(r.toString(),t),s={};return n.split(`
`).filter(u=>/^https?:\/\//.test(u)).forEach(u=>{let c=u.match(/\/itag\/(\d+)\//)||[],f=parseInt(c[1]);s[u]={itag:f,url:u}}),s}static getDashManifest(e,t){return new Promise((r,n)=>{let s=Ys.default.parser(!1),u={};s.onerror=n;let c=null;s.onopentag=f=>{let d=f.attributes;if(f.name==="ADAPTATIONSET")c=d;else if(f.name==="REPRESENTATION"){let m=parseInt(d.ID);if(!isNaN(m)){let E=f.attributes.HEIGHT?{width:parseInt(d.WIDTH),height:parseInt(d.HEIGHT),fps:parseInt(d.FRAMERATE)}:{audioSampleRate:d.AUDIOSAMPLINGRATE};u[e]=Object.assign({itag:m,url:e,bitrate:parseInt(d.BANDWIDTH),mimeType:`${c.MIMETYPE}; codecs="${d.CODECS}"`},E)}}},s.onend=()=>{r(u)},$n.Fetcher.request(new URL(e,Gn.Url.getBaseUrl()).toString(),t).then(f=>{s.write(f),s.close()}).catch(n)})}static parseAdditionalManifests(e,t){let r=e&&e.streamingData,n=[];return r&&(r.dashManifestUrl&&n.push(this.getDashManifest(r.dashManifestUrl,t)),r.hlsManifestUrl&&n.push(this.getM3U8(r.hlsManifestUrl,t))),n}};o(rr,"FormatParser");var ir=rr;Ve.FormatParser=ir});var lr=b(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});var jn=j(),sr=class sr{static checkResponse(e,t){var r,n,s;try{if(e.status==="fulfilled")return e.value===null?null:(jn.Logger.debug(`[ ${t} ]: <success>Success</success>`),Object.assign({},e.value));{let u=e.reason||{};return jn.Logger.debug(`[ ${t} ]: <error>Error</error>
Reason: ${((r=u.error)==null?void 0:r.message)||((n=u.error)==null?void 0:n.toString())}`),u}}catch{return(s=e||{})==null?void 0:s.reason}}};o(sr,"ApiBase");var ar=sr;or.default=ar});var Yn=b(st=>{"use strict";var Ks=st&&st.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(st,"__esModule",{value:!0});var cr;(function(i){i[i.WEB=0]="WEB",i[i.WEBCREATOR=1]="WEBCREATOR",i[i.WEBEMBEDDED=2]="WEBEMBEDDED",i[i.TVEMBEDDED=3]="TVEMBEDDED",i[i.IOS=4]="IOS",i[i.ANDROID=5]="ANDROID",i[i.MWEB=6]="MWEB",i[i.TV=7]="TV"})(cr||(cr={}));var ge=It(),Xs=Tt(),ur=j(),Wn=Ks(lr()),zs=["This video is private"],fr=class fr{static async getApiResponses(e,t){var c,f;let r={web:t.includes("web")?ge.Web.getPlayerResponse(e):Promise.reject(null),webCreator:t.includes("webCreator")?ge.WebCreator.getPlayerResponse(e):Promise.reject(null),webEmbedded:t.includes("webEmbedded")?ge.WebEmbedded.getPlayerResponse(e):Promise.reject(null),tvEmbedded:t.includes("tvEmbedded")?ge.TvEmbedded.getPlayerResponse(e):Promise.reject(null),ios:t.includes("ios")?ge.Ios.getPlayerResponse(e):Promise.reject(null),android:t.includes("android")?ge.Android.getPlayerResponse(e):Promise.reject(null),mweb:t.includes("mweb")?ge.MWeb.getPlayerResponse(e):Promise.reject(null),tv:t.includes("tv")?ge.Tv.getPlayerResponse(e):Promise.reject(null)},n=await Promise.allSettled(Object.values(r)),s={web:null,webCreator:null,webEmbedded:null,tvEmbedded:null,ios:null,android:null,mweb:null,tv:null};t.forEach(d=>{var E;let m=d.toUpperCase();s[d]=((E=Wn.default.checkResponse(n[cr[m]],d))==null?void 0:E.contents)||null});let u=n.every(d=>d.status==="rejected");if(u){let d=`All player APIs responded with an error. (Clients: ${t.join(", ")})
For details, specify \`logDisplay: ["debug", "info", "success", "warning", "error"]\` in the constructor options of the YtdlCore class.`;if(s.ios&&(zs.includes(((c=s.ios)==null?void 0:c.playabilityStatus.reason)||"")||!s.ios.videoDetails))throw new Xs.UnrecoverableError(d+`
Note: This error cannot continue processing. (Details: ${JSON.stringify(s.ios.playabilityStatus.reason)})`);if(!s.web){ur.Logger.info("As a fallback to obtain the minimum information, the web client is forced to adapt.");let m=(await Promise.allSettled([ge.Web.getPlayerResponse(e)]))[0];s.web=((f=Wn.default.checkResponse(m,"web"))==null?void 0:f.contents)||null}ur.Logger.error(d),ur.Logger.info("Only minimal information is available, as information from the Player API is not available.")}return{isMinimalMode:u,responses:s}}};o(fr,"PlayerApi");var dr=fr;st.default=dr});var Kn=b(lt=>{"use strict";var Qs=lt&&lt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(lt,"__esModule",{value:!0});var Zs=It(),Js=Qs(lr()),pr=class pr{static async getApiResponses(e){var s;let t={web:Zs.Web.getNextResponse(e)},r=await Promise.allSettled(Object.values(t));return{web:((s=Js.default.checkResponse(r[0],"web"))==null?void 0:s.contents)||null}}};o(pr,"NextApi");var hr=pr;lt.default=hr});var Qn=b(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});var gr=Te(),el=j(),tl=/^\d+$/,il=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,rl=/(-?\d+)(ms|s|m|h)/g,Bt={ms:1,s:1e3,m:6e4,h:36e5};function nl(i){if(typeof i=="number")return i;if(tl.test(i))return+i;let e=il.exec(i);if(e)return+(e[1]||0)*Bt.h+ +(e[2]||0)*Bt.m+ +e[3]*Bt.s+ +(e[4]||0);{let t=0;for(let r of i.matchAll(rl))t+=+r[1]*Bt[r[2]];return t}}o(nl,"parseTimestamp");function Ie(i){return i&&i.runs?i.runs[0].text:i?i.simpleText:""}o(Ie,"getText");function zn(i){return!!(i&&i.find(e=>e.metadataBadgeRenderer.tooltip==="Verified"))}o(zn,"isVerified");function al(i,e="en"){let t=new Date,r=Math.floor((t.getTime()-i.getTime())/1e3),n=new Intl.RelativeTimeFormat(e,{numeric:"always"});return r<60?n.format(-r,"second"):r<3600?n.format(-Math.floor(r/60),"minute"):r<86400?n.format(-Math.floor(r/3600),"hour"):r<2592e3?n.format(-Math.floor(r/86400),"day"):r<31536e3?n.format(-Math.floor(r/2592e3),"month"):n.format(-Math.floor(r/31536e3),"year")}o(al,"getRelativeTime");function Xn(i,e){var t,r;if(!i)return null;try{let n=Ie(i.viewCountText),s=Ie(i.shortViewCountText);/^\d/.test(s)||(s=""),n=(/^\d/.test(n)?n:s).split(" ")[0];let u=new Intl.NumberFormat(e,{notation:"compact"}),c=i.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,f=c.browseId,d=Ie(i.shortBylineText),m=(c.canonicalBaseUrl||"").split("/").slice(-1)[0],E=Ie(i.publishedTimeText),_=s.split(" ")[0];return{id:i.videoId,title:Ie(i.title),published:E||null,author:{id:f,name:d,user:m,channelUrl:`https://www.youtube.com/channel/${f}`,userUrl:`https://www.youtube.com/user/${m}`,thumbnails:(t=i.channelThumbnail.thumbnails||[])==null?void 0:t.map(w=>(w.url=new URL(w.url,gr.Url.getBaseUrl()).toString(),w)),subscriberCount:null,verified:zn(i.ownerBadges||[])},shortViewCountText:e==="en"?_:u.format(mr(_)),viewCount:parseInt(n.replace(/,/g,"")),lengthSeconds:i.lengthText?Math.floor(nl(Ie(i.lengthText))/1e3):null,thumbnails:i.thumbnail.thumbnails||[],richThumbnails:i.richThumbnail?((r=i.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails)==null?void 0:r.thumbnails)||[]:[],isLive:!!(i.badges&&i.badges.find(w=>w.metadataBadgeRenderer.label==="LIVE NOW"))}}catch(n){return console.log(n),el.Logger.debug(`<error>Failed</error> to parse related video (ID: ${(i==null?void 0:i.videoId)||"Unknown"}): <error>${n}</error>`),null}}o(Xn,"parseRelatedVideo");function mr(i){let e=i.slice(-1).toUpperCase(),t=parseFloat(i.slice(0,-1));switch(e){case"K":return t*1e3;case"M":return t*1e6;case"B":return t*1e9;default:return parseFloat(i)}}o(mr,"parseStringToNumber");var br=class br{static getMedia(e){var n;if(!e)return null;let t={category:"",categoryUrl:"",thumbnails:[]},r=null;try{r=((n=e.microformat)==null?void 0:n.playerMicroformatRenderer)||null}catch{}if(!r)return null;try{t.category=r.category,t.thumbnails=r.thumbnail.thumbnails||[],t.category==="Music"?t.categoryUrl=gr.Url.getBaseUrl()+"/music":t.category==="Gaming"&&(t.categoryUrl=gr.Url.getBaseUrl()+"/gaming")}catch{}return t}static getAuthor(e){if(!e)return null;let t=null,r=null,n=null,s=[],u=null,c=!1,f=null;try{let d=e.contents.twoColumnWatchNextResults.results.results.contents.find(m=>m.videoSecondaryInfoRenderer);f=d==null?void 0:d.videoSecondaryInfoRenderer}catch{}if(!f||!f.owner)return null;try{let d=f.owner.videoOwnerRenderer;t=d.title.runs[0].text||null,r=d.navigationEndpoint.browseEndpoint.browseId||null,n=d.navigationEndpoint.browseEndpoint.canonicalBaseUrl.replace("/","")||null,s=d.thumbnail.thumbnails||[],u=Math.floor(mr(d.subscriberCountText.simpleText.split(" ")[0]))||null,c=zn(d.badges||[])}catch{}try{return{id:r||"",name:t||"",user:n||"",channelUrl:r?`https://www.youtube.com/channel/${r}`:"",externalChannelUrl:r?`https://www.youtube.com/channel/${r}`:"",userUrl:"https://www.youtube.com"+n,thumbnails:s,subscriberCount:u,verified:c}}catch{return null}}static getAuthorFromPlayerResponse(e){var m,E,_;let t=null,r=null,n=null,s=[],u=null,c=!1,f=null,d=null;try{f=((m=e.microformat)==null?void 0:m.playerMicroformatRenderer)||null,d=(_=(E=e.endscreen)==null?void 0:E.endscreenRenderer.elements.find(T=>T.endscreenElementRenderer.style==="CHANNEL"))==null?void 0:_.endscreenElementRenderer}catch{}if(!f)return null;try{t=f.ownerChannelName||null,r=f.externalChannelId,n="@"+(f.ownerProfileUrl||"").split("@")[1],s=d.image.thumbnails||[],u=null,c=!1}catch{}try{return{id:r||"",name:t||"",user:n||"",channelUrl:r?`https://www.youtube.com/channel/${r}`:"",externalChannelUrl:r?`https://www.youtube.com/channel/${r}`:"",userUrl:"https://www.youtube.com/"+n,thumbnails:s,subscriberCount:u,verified:c}}catch{return null}}static getLikes(e){if(!e)return null;try{let t=e.contents.twoColumnWatchNextResults.results.results.contents,r=t.find(f=>f.videoPrimaryInfoRenderer),n=r.videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons,s=n.filter(f=>f.segmentedLikeDislikeButtonViewModel)[0].segmentedLikeDislikeButtonViewModel.likeButtonViewModel.likeButtonViewModel.toggleButtonViewModel.toggleButtonViewModel.defaultButtonViewModel.buttonViewModel,u=s.accessibilityText,c=s.title;if(u){let f=u.match(/[\d,.]+/)||[];return parseInt((f[0]||"").replace(/\D+/g,""))}else if(c)return mr(c);return null}catch{return null}}static getRelatedVideos(e,t){if(!e)return[];let r=[];try{r=e.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch{}let n=[];for(let s of r){let u=s.compactVideoRenderer;if(u){let c=Xn(u,t);c&&n.push(c)}else{let c=s.compactAutoplayRenderer||s.itemSectionRenderer;if(!c||!Array.isArray(c.contents))continue;for(let f of c.contents){let d=Xn(f.compactVideoRenderer,t);d&&n.push(d)}}}return n}static cleanVideoDetails(e,t,r="en"){let n=e;n.thumbnail&&(n.thumbnails=n.thumbnail.thumbnails);let s=n.shortDescription||Ie(n.description);if(s&&(n.description=s),typeof n.thumbnail<"u"&&delete n.thumbnail,typeof n.shortDescription<"u"&&delete n.shortDescription,t){n.lengthSeconds=parseInt(t.lengthSeconds||e.lengthSeconds.toString()),n.publishDate=t.publishDate||e.publishDate||null,n.published=null;try{n.publishDate&&(n.published=al(new Date(n.publishDate),r)||null)}catch{}}return n.lengthSeconds&&(n.lengthSeconds=parseInt(n.lengthSeconds)),n.viewCount&&(n.viewCount=parseInt(n.viewCount)),n}static getStoryboards(e){if(!e)return[];let t=e.storyboards&&e.storyboards.playerStoryboardSpecRenderer&&e.storyboards.playerStoryboardSpecRenderer.spec&&e.storyboards.playerStoryboardSpecRenderer.spec.split("|");if(!t)return[];let r=new URL(t.shift()||"");return t.map((n,s)=>{let[u,c,f,d,m,E,_,T]=n.split("#");r.searchParams.set("sigh",T),f=parseInt(f,10),d=parseInt(d,10),m=parseInt(m,10);let w=Math.ceil(f/(d*m));return{templateUrl:r.toString().replace("$L",s.toString()).replace("$N",_),thumbnailWidth:parseInt(u,10),thumbnailHeight:parseInt(c,10),thumbnailCount:f,interval:parseInt(E,10),columns:d,rows:m,storyboardCount:w}})}static getChapters(e){if(!e)return[];let t=e.playerOverlays&&e.playerOverlays.playerOverlayRenderer,r=t&&t.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar,n=r&&r.multiMarkersPlayerBarRenderer&&r.multiMarkersPlayerBarRenderer.markersMap,s=Array.isArray(n)&&n.find(c=>c.value&&Array.isArray(c.value.chapters));return s?s.value.chapters.map(c=>({title:Ie(c.chapterRenderer.title),startTime:c.chapterRenderer.timeRangeStartMillis/1e3})):[]}};o(br,"InfoExtras");var yr=br;Er.default=yr});var Ar=b(He=>{"use strict";var Lt=He&&He.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(He,"__esModule",{value:!0});He._getBasicInfo=ea;He.getBasicInfo=yl;var ol=xi(),Zn=Z(),ut=j(),sl=Lt(ze()),_r=Te(),ll=Hi(),ul=nr(),cl=Lt(Yn()),dl=Lt(Kn()),H=Lt(Qn()),fl=["support.google.com/youtube/?p=age_restrictions","youtube.com/t/community_guidelines"],hl=["web","webCreator","webEmbedded","ios","android","mweb","tv","tvEmbedded"],wr=["web","webCreator","tvEmbedded","ios","android"],Jn=Zn.Platform.getShim(),Tr=Jn.cache,pl={videoDetails:{videoUrl:"",videoId:"",playabilityStatus:"UNKNOWN",title:"",author:null,lengthSeconds:0,viewCount:0,likes:null,media:null,storyboards:[],chapters:[],thumbnails:[],description:null,keywords:[],channelId:"",ageRestricted:!1,allowRatings:!1,isOwnerViewing:!1,isCrawlable:!1,isPrivate:!1,isUnpluggedCorpus:!1,isLiveContent:!1,isUpcoming:!1,isLowLatencyLiveStream:!1,liveBroadcastDetails:{isLiveNow:!1,startTimestamp:""},published:null,publishDate:null,latencyClass:null},relatedVideos:[],formats:[],full:!1,_metadata:{isMinimumMode:!1,clients:[],html5Player:"",id:"",options:{}},_ytdl:{version:Jn.info.version}},gl=JSON.stringify(pl);function ml(i,e){return i&&i.length===0&&(ut.Logger.warning("At least one client must be specified."),i=wr),i=i.filter(t=>hl.includes(t)),e?i:[...new Set([...wr,...i])]}o(ml,"setupClients");async function ea(i,e,t){var Re,z,S,Q;let r=Zn.Platform.getShim(),n=(0,ll.getHtml5Player)(e);if(e.oauth2&&e.oauth2 instanceof ol.OAuth2&&e.oauth2.shouldRefreshToken()&&(ut.Logger.info("The specified OAuth2 token has expired and will be renewed automatically."),await e.oauth2.refreshAccessToken()),!e.poToken&&!e.disablePoTokenAutoGeneration){ut.Logger.warning("Specify poToken for stable and fast operation. See README for details."),ut.Logger.info("Automatically generates poToken, but stable operation cannot be guaranteed.");let{poToken:U,visitorData:x}=await r.poToken();e.poToken=U,e.visitorData=x}e.poToken&&!e.visitorData&&ut.Logger.warning("If you specify a poToken, you must also specify the visitorData."),e.clients=ml(e.clients||wr,(Re=e.disableDefaultClients)!=null?Re:!1);let s=await n,u=s.playerUrl;if(!u)throw new Error(`HTML5Player was not found, please report it via Issues (${r.info.issuesUrl}).`);let c=parseInt(s.signatureTimestamp||"0")||0,f={videoId:i,signatureTimestamp:c,options:e},d=JSON.parse(gl),m={playerApiRequest:cl.default.getApiResponses(f,e.clients),nextApiRequest:dl.default.getApiResponses(f)},{isMinimalMode:E,responses:_}=await m.playerApiRequest,T=await m.nextApiRequest,w=Object.values(_)||[];d._metadata.isMinimumMode=E,d._metadata.html5Player=u,d._metadata.clients=e.clients,d._metadata.options=e,d._metadata.id=i,(e.includesPlayerAPIResponse||t)&&(d._playerApiResponses=_),(e.includesNextAPIResponse||t)&&(d._nextApiResponses=T);function C(U,x){return U.filter(We=>We&&We[x])[0]}o(C,"getValueWithSpecifiedKey");let $=C(w,"storyboards"),v=C(w,"videoDetails").videoDetails||{},K=C(w,"microformat").microformat||null,R=((S=(z=_.web)==null?void 0:z.microformat)==null?void 0:S.playerMicroformatRenderer.liveBroadcastDetails)||null,B=H.default.getStoryboards($),se=H.default.getMedia(_.web)||H.default.getMedia(_.webCreator)||H.default.getMedia(_.ios)||H.default.getMedia(_.android)||H.default.getMedia(_.webEmbedded)||H.default.getMedia(_.tvEmbedded)||H.default.getMedia(_.mweb)||H.default.getMedia(_.tv),G=!!se&&fl.some(U=>Object.values(se||{}).some(x=>typeof x=="string"&&x.includes(U))),je={videoUrl:_r.Url.getWatchPageUrl(i),author:H.default.getAuthor(T.web),media:se,likes:H.default.getLikes(T.web),ageRestricted:G,storyboards:B,chapters:H.default.getChapters(T.web),thumbnails:[],description:""},p=w.reduce((U,x)=>[...U,...ul.FormatParser.parseFormats(x)],[]);return d.videoDetails=H.default.cleanVideoDetails(Object.assign(d.videoDetails,v,je),(K==null?void 0:K.playerMicroformatRenderer)||null,e.hl),d.videoDetails.playabilityStatus=((Q=C(w,"playabilityStatus"))==null?void 0:Q.playabilityStatus.status)||"UNKNOWN",d.videoDetails.liveBroadcastDetails=R,d.relatedVideos=e.includesRelatedVideo?H.default.getRelatedVideos(T.web,e.hl||"en"):[],d.formats=t?p:[],d}o(ea,"_getBasicInfo");async function yl(i,e){sl.default.checkForUpdates();let t=_r.Url.getVideoID(i)||(_r.Url.validateID(i)?i:null);if(!t)throw new Error("The URL specified is not a valid URL.");let r=["getBasicInfo",t,e.hl,e.gl].join("-");if(await Tr.has(r))return Tr.get(r);let n=await ea(t,e,!1);return Tr.set(r,n,{ttl:60*30}),n}o(yl,"getBasicInfo")});var ta=b(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.FORMATS=void 0;var El={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",bitrate:25e4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8e5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5e5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5e4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175e3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35e5,audioBitrate:192},43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1e6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"240p",bitrate:5e5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1e5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15e5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"240p",bitrate:2e5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3e5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1e6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135e5,audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5e4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1e5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},231:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},232:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:8e5,audioBitrate:null},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1e5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25e4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7e5,audioBitrate:null},248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15e5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4e6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"2160p",bitrate:125e5,audioBitrate:null},270:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9e6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2e7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8e4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3e6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55e5,audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318e3,audioBitrate:48},301:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:128},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25e5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5e6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1e7,audioBitrate:null},311:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:125e4,audioBitrate:null},312:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13e6,audioBitrate:null},315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2e7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8e4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1e5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25e4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5e5,audioBitrate:null},334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1e6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15e5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5e6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12e6,audioBitrate:null}};Ut.FORMATS=El});var xt=b($e=>{"use strict";var bl=$e&&$e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($e,"__esModule",{value:!0});$e.FormatUtils=void 0;var Tl=ta(),_l=bl(ze()),wl=["mp4a","mp3","vorbis","aac","opus","flac"],Al=["mp4v","avc1","Sorenson H.283","MPEG-4 Visual","VP8","VP9","av01","H.264"];function ia(i,e){return i.findIndex(t=>e.codec.text&&e.codec.text.includes(t))}o(ia,"getEncodingRank");function ra(i){return i.bitrate||0}o(ra,"getVideoBitrate");function na(i){return ia(Al,i)}o(na,"getVideoEncodingRank");function aa(i){return i.audioBitrate||0}o(aa,"getAudioBitrate");function oa(i){return ia(wl,i)}o(oa,"getAudioEncodingRank");function Cr(i,e,t){let r=0;for(let n of t)if(r=n(e)-n(i),r!==0)break;return r}o(Cr,"sortFormatsBy");function Il(i){return parseInt(i.quality.label)||0}o(Il,"getQualityLabel");function Ir(i,e){return Cr(i,e,[Il,ra,na])}o(Ir,"sortFormatsByVideo");function Sr(i,e){return Cr(i,e,[aa,oa])}o(Sr,"sortFormatsByAudio");function Sl(i,e){let t=o(r=>e.find(n=>`${n.itag}`==`${r}`)||null,"getFormat");if(Array.isArray(i)){let r=i.find(n=>t(n));return r&&t(r)||null}else return t(i||"")||null}o(Sl,"getFormatByQuality");var Pr=class Pr{static sortFormats(e,t){return Cr(e,t,[r=>+!!r.isHLS,r=>+!!r.isDashMPD,r=>+(parseInt(r.contentLength)>0),r=>+(r.hasVideo&&r.hasAudio),r=>+r.hasVideo,r=>parseInt(r.quality.label)||0,ra,aa,na,oa])}static filterFormats(e,t){let r;switch(t){case"videoandaudio":case"audioandvideo":{r=o(n=>n.hasVideo&&n.hasAudio,"fn");break}case"video":{r=o(n=>n.hasVideo,"fn");break}case"videoonly":{r=o(n=>n.hasVideo&&!n.hasAudio,"fn");break}case"audio":{r=o(n=>n.hasAudio,"fn");break}case"audioonly":{r=o(n=>n.hasAudio&&!n.hasVideo,"fn");break}default:if(typeof t=="function")r=t;else throw new TypeError(`Given filter (${t}) is not supported`)}return e.filter(n=>!!n.url&&r(n))}static chooseFormat(e,t){if(typeof t.format=="object"){if(!t.format.url)throw new Error("Invalid format given, did you use `ytdl.getFullInfo()`?");return t.format}t.filter&&(e=this.filterFormats(e,t.filter)),t.excludingClients&&(e=e.filter(s=>{var u;return!((u=t.excludingClients)!=null&&u.includes(s.sourceClientName))})),t.includingClients&&t.includingClients!=="all"&&(e=e.filter(s=>{var u;return(u=t.includingClients)==null?void 0:u.includes(s.sourceClientName)})),e.some(s=>s.isHLS)&&(e=e.filter(s=>s.isHLS||!s.isLive));let r=t.quality||"highest",n;switch(r){case"highest":{n=e[0];break}case"lowest":{n=e[e.length-1];break}case"highestaudio":{e=this.filterFormats(e,"audio"),e.sort(Sr);let s=e[0];e=e.filter(c=>Sr(s,c)===0);let u=e.map(c=>parseInt(c.quality.label)||0).sort((c,f)=>c-f)[0];n=e.find(c=>(parseInt(c.quality.label)||0)===u);break}case"lowestaudio":{e=this.filterFormats(e,"audio"),e.sort(Sr),n=e[e.length-1];break}case"highestvideo":{e=this.filterFormats(e,"video"),e.sort(Ir);let s=e[0];e=e.filter(c=>Ir(s,c)===0);let u=e.map(c=>c.audioBitrate||0).sort((c,f)=>c-f)[0];n=e.find(c=>(c.audioBitrate||0)===u);break}case"lowestvideo":{e=this.filterFormats(e,"video"),e.sort(Ir),n=e[e.length-1];break}default:{n=Sl(r,e);break}}if(!n)throw new Error(`No such format found: ${r}`);return n}static getClientName(e){try{switch(new URL(e).searchParams.get("c")){case"WEB":return"web";case"MWEB":return"mweb";case"WEB_CREATOR":return"webCreator";case"WEB_EMBEDDED_PLAYER":return"webEmbedded";case"IOS":return"ios";case"ANDROID":return"android";case"TVHTML5_SIMPLY_EMBEDDED_PLAYER":return"tvEmbedded";default:return"unknown"}}catch{return"unknown"}}static addFormatMeta(e,t){var d;let r=e.itag,n=Tl.FORMATS[r]||null,s=e.mimeType&&_l.default.between(e.mimeType,'codecs="','"'),u=/\/manifest\/hls_(variant|playlist)\//.test(e.url),c={itag:r,url:e.url,mimeType:e.mimeType||"video/mp4",codec:{text:s||"h264",video:null,audio:null},quality:{text:e.quality,label:e.qualityLabel||(u?"video":"audio")},bitrate:e.bitrate||(n==null?void 0:n.bitrate)||NaN,audioBitrate:(n==null?void 0:n.audioBitrate)||NaN,contentLength:e.contentLength,container:((d=e.mimeType)==null?void 0:d.split(";")[0].split("/")[1])||null,hasVideo:!!e.qualityLabel||!e.audioQuality,hasAudio:!!e.audioQuality,isLive:/\bsource[/=]yt_live_broadcast\b/.test(e.url),isHLS:u,isDashMPD:/\/manifest\/dash\//.test(e.url),sourceClientName:u?"ios":this.getClientName(e.url)||"unknown"},f=c.codec.text.split(", ");return t&&(c.originalData=e),c.codec.video=c.hasVideo?f[0]:null,c.codec.audio=c.hasAudio?f[1]||f[0]:null,c}};o(Pr,"FormatUtils");var Rr=Pr;$e.FormatUtils=Rr});var ua=b(ct=>{"use strict";var Rl=ct&&ct.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ct,"__esModule",{value:!0});ct.getFullInfo=Bl;var Cl=ki(),Pl=Z(),Nl=Rl(ze()),sa=Te(),la=xt(),Dl=nr(),Ol=Ar(),Nr=Pl.Platform.getShim().cache,Ml=new Cl.Signature;async function vl(i,e){var s;let t=await(0,Ol._getBasicInfo)(i,e,!0),r=[];try{let u=t.formats;r.push(Ml.decipherFormats(u)),e.parsesHLSFormat&&((s=t._playerApiResponses)!=null&&s.ios)&&r.push(...Dl.FormatParser.parseAdditionalManifests(t._playerApiResponses.ios,e))}catch{}let n=Object.values(Object.assign({},...await Promise.all(r)));return t.formats=n.map(u=>{var c;return la.FormatUtils.addFormatMeta(u,(c=e.includesOriginalFormatData)!=null?c:!1)}),t.formats.sort(la.FormatUtils.sortFormats),t.full=!0,e.includesPlayerAPIResponse||delete t._playerApiResponses,e.includesNextAPIResponse||delete t._nextApiResponses,t}o(vl,"_getFullInfo");async function Bl(i,e){Nl.default.checkForUpdates();let t=sa.Url.getVideoID(i)||(sa.Url.validateID(i)?i:null);if(!t)throw new Error("The URL specified is not a valid URL.");let r=["getFullInfo",t,e.hl,e.gl].join("-");if(await Nr.has(r))return Nr.get(r);let n=await vl(t,e);return Nr.set(r,n,{ttl:60*30}),n}o(Bl,"getFullInfo")});var Dr=b(Se=>{"use strict";var Ll=Se&&Se.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),ca=Se&&Se.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ll(e,i,t)};Object.defineProperty(Se,"__esModule",{value:!0});ca(Ar(),Se);ca(ua(),Se)});var ga=b(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.streamToIterable=ha;dt.download=Hl;dt.downloadFromInfo=Vl;var Ul=Dr(),da=xt(),fa=j(),Or=Z(),xl=Ke(),Fl={method:"GET",headers:{accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"},redirect:"follow"};async function kl(i){return new Promise(e=>{let t=o(n=>{n.status===200?(fa.Logger.debug(`[ ${i.sourceClientName} ]: <success>Video URL is normal.</success> The response was received with status code <success>"${n.status}"</success>.`),e({valid:!0})):r(new Error(`Status code: ${n.status}`))},"successResponseHandler"),r=o(n=>{fa.Logger.debug(`[ ${i.sourceClientName} ]: The URL for the video <error>did not return a successful response</error>. Got another format.
Reason: ${n.message}`),e({valid:!1,reason:n.message})},"errorResponseHandler");try{Or.Platform.getShim().fetcher(i.url,{method:"HEAD"}).then(n=>t(n),n=>r(n))}catch(n){r(n)}})}o(kl,"isDownloadUrlValid");function ql(i,e){return new Promise(async t=>{let r=["web"],n,s=!1;try{n=da.FormatUtils.chooseFormat(i,e)}catch(u){throw u}if(!n)throw new Error("Failed to retrieve format data.");for(;s===!1;){if(!n)throw new Error("Failed to retrieve format data.");let{valid:u,reason:c}=await kl(n);if(u)s=!0;else{n.sourceClientName!=="unknown"&&r.push(n.sourceClientName);try{n=da.FormatUtils.chooseFormat(i,{excludingClients:r,includingClients:c!=null&&c.includes("403")?["ios","android"]:"all",quality:e.quality,filter:e.filter})}catch(f){throw f}}}t(n)})}o(ql,"getValidDownloadUrl");async function*ha(i){let e=i.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}o(ha,"streamToIterable");async function pa(i,e){if(!i.formats.length)throw new Error("This video is not available due to lack of video format.");let t=typeof e.dlChunkSize=="number"?e.dlChunkSize:1024*1024*10,r=(e.filter==="audioandvideo"||e.filter==="videoandaudio")&&!e.range,n=Object.freeze(await ql(i.formats,e)),s={...Fl},u=e.range?e.range.start:0,c=e.range&&e.range.end||t,f=!1,d,m=r?n.url:n.url+"&range="+u+"-"+c,E=n.sourceClientName==="ios"||n.sourceClientName==="android"?n.sourceClientName:n.sourceClientName.includes("tv")?"tv":"desktop";if(s.headers={...s.headers,"User-Agent":xl.UserAgent.getRandomUserAgent(E)},e.rewriteRequest){let{url:T,options:w}=e.rewriteRequest(m,s,{isDownloadUrl:!0});m=T,s=w}if(e.originalProxy)try{let T=new URL(e.originalProxy.download);m.includes(T.host)||(m=`${T.protocol}//${T.host}${T.pathname}?${e.originalProxy.urlQueryName||"url"}=${encodeURIComponent(m)}`)}catch{}if(r){let T=await Or.Platform.getShim().fetcher(m,s);if(!T.ok)throw new Error(`Download failed with status code <warning>"${T.status}"</warning>.`);let w=T.body;if(!w)throw new Error("Failed to retrieve response body.");return w}return new ReadableStream({start(){},pull:o(async T=>{if(f){T.close();return}let w=n.contentLength?parseInt(n.contentLength):0;return(c>=w||e.range)&&(f=!0),new Promise(async(C,$)=>{try{d=new AbortController;let v=n.url+"&range="+u+"-"+c;if(e.rewriteRequest){let{url:B,options:se}=e.rewriteRequest(v,s,{isDownloadUrl:!0});v=B,s=se}if(e.originalProxy)try{let B=new URL(e.originalProxy.download);v.includes(B.host)||(v=`${B.protocol}//${B.host}${B.pathname}?${e.originalProxy.urlQueryName||"url"}=${encodeURIComponent(v)}`)}catch{}let K=await Or.Platform.getShim().fetcher(m,s);if(!K.ok)throw new Error(`Download failed with status code <warning>"${K.status}"</warning>.`);let R=K.body;if(!R)throw new Error("Failed to retrieve response body.");for await(let B of ha(R))T.enqueue(B);u=c+1,c+=t,C()}catch(v){$(v)}})},"pull"),async cancel(T){d.abort(T)}},{highWaterMark:e.highWaterMark||1024*512,size(T){return(T==null?void 0:T.byteLength)||0}})}o(pa,"downloadFromInfoCallback");async function Vl(i,e){if(!i.full)throw new Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");return await pa(i,e)}o(Vl,"downloadFromInfo");function Hl(i,e){return new Promise(t=>{(0,Ul.getFullInfo)(i,e).then(r=>{t(pa(r,e))}).catch(r=>{throw r})})}o(Hl,"download")});var ma=b(Me=>{"use strict";var $l=Me&&Me.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Gl=Me&&Me.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&$l(e,i,t)};Object.defineProperty(Me,"__esModule",{value:!0});Gl(ga(),Me)});var Ta=b(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.YtdlCore=void 0;var Ft=Z(),ya=ma(),Ea=Dr(),jl=Hi(),Mr=xi(),kt=Te(),ba=xt(),Wl=Ye(),me=j(),ye=Ft.Platform.getShim().fileCache;function Yl(i){return parseInt(i.replace("v","").split(".")[0])>=16}o(Yl,"isNodeVersionOk");var vr=class vr{async setPoToken(e){let t=await ye.get("poToken");e?this.poToken=e:t&&(me.Logger.debug("PoToken loaded from cache."),this.poToken=t||void 0),ye.set("poToken",this.poToken||"",{ttl:60*60*24})}async setVisitorData(e){let t=await ye.get("visitorData");e?this.visitorData=e:t&&(me.Logger.debug("VisitorData loaded from cache."),this.visitorData=t||void 0),ye.set("visitorData",this.visitorData||"",{ttl:60*60*24})}async setOAuth2(e){let t=await ye.get("oauth2")||void 0;try{e?this.oauth2=new Mr.OAuth2(e)||void 0:t?this.oauth2=new Mr.OAuth2(t):this.oauth2=null}catch{this.oauth2=null}}automaticallyGeneratePoToken(){if(!this.poToken&&!this.visitorData){me.Logger.debug("Since PoToken and VisitorData are not specified, they are generated automatically.");let e=Ft.Platform.getShim().poToken;e().then(({poToken:t,visitorData:r})=>{this.poToken=t,this.visitorData=r,ye.set("poToken",this.poToken||"",{ttl:60*60*24}),ye.set("visitorData",this.visitorData||"",{ttl:60*60*24})}).catch(()=>{})}}initializeHtml5PlayerCache(){ye.get("html5Player")||(me.Logger.debug("To speed up processing, html5Player and signatureTimestamp are pre-fetched and cached."),(0,jl.getHtml5Player)({}))}constructor({hl:e,gl:t,rewriteRequest:r,poToken:n,disablePoTokenAutoGeneration:s,visitorData:u,includesPlayerAPIResponse:c,includesNextAPIResponse:f,includesOriginalFormatData:d,includesRelatedVideo:m,clients:E,disableDefaultClients:_,oauth2Credentials:T,parsesHLSFormat:w,originalProxy:C,quality:$,filter:v,excludingClients:K,includingClients:R,range:B,begin:se,liveBuffer:G,highWaterMark:je,IPv6Block:p,dlChunkSize:Re,disableFileCache:z,fetcher:S,logDisplay:Q}={}){if(this.hl="en",this.gl="US",this.disablePoTokenAutoGeneration=!1,this.includesPlayerAPIResponse=!1,this.includesNextAPIResponse=!1,this.includesOriginalFormatData=!1,this.includesRelatedVideo=!0,this.disableDefaultClients=!1,this.oauth2=null,this.parsesHLSFormat=!1,this.excludingClients=[],this.includingClients="all",this.version=Wl.VERSION,me.Logger.logDisplay=Q||["info","success","warning","error"],S){let U=Ft.Platform.getShim();U.fetcher=S,U.requestRelated.originalProxy=C,U.requestRelated.rewriteRequest=r,Ft.Platform.load(U)}if(z&&ye.disable(),this.hl=e||"en",this.gl=t||"US",this.rewriteRequest=r||void 0,this.disablePoTokenAutoGeneration=s!=null?s:!1,this.includesPlayerAPIResponse=c!=null?c:!1,this.includesNextAPIResponse=f!=null?f:!1,this.includesOriginalFormatData=d!=null?d:!1,this.includesRelatedVideo=m!=null?m:!0,this.clients=E||void 0,this.disableDefaultClients=_!=null?_:!1,this.parsesHLSFormat=w!=null?w:!1,this.originalProxy=C||void 0,this.originalProxy&&(me.Logger.debug(`<debug>"${this.originalProxy.base}"</debug> is used for <blue>API requests</blue>.`),me.Logger.debug(`<debug>"${this.originalProxy.download}"</debug> is used for <blue>video downloads</blue>.`),me.Logger.debug(`The query name <debug>"${this.originalProxy.urlQueryName||"url"}"</debug> is used to specify the URL in the request. <blue>(?url=...)</blue>`)),this.setPoToken(n),this.setVisitorData(u),this.setOAuth2(T||null),this.quality=$||void 0,this.filter=v||void 0,this.excludingClients=K||[],this.includingClients=R||"all",this.range=B||void 0,this.begin=se||void 0,this.liveBuffer=G||void 0,this.highWaterMark=je||void 0,this.IPv6Block=p||void 0,this.dlChunkSize=Re||void 0,this.disablePoTokenAutoGeneration||this.automaticallyGeneratePoToken(),this.initializeHtml5PlayerCache(),!Yl(process.version))throw new Error(`You are using Node.js ${process.version} which is not supported. Minimum version required is v16.`)}initializeOptions(e){var r;let t={...e,oauth2:this.oauth2};return t.hl=e.hl||this.hl,t.gl=e.gl||this.gl,t.rewriteRequest=e.rewriteRequest||this.rewriteRequest,t.poToken=e.poToken||this.poToken,t.disablePoTokenAutoGeneration=e.disablePoTokenAutoGeneration||this.disablePoTokenAutoGeneration,t.visitorData=e.visitorData||this.visitorData,t.includesPlayerAPIResponse=e.includesPlayerAPIResponse||this.includesPlayerAPIResponse,t.includesNextAPIResponse=e.includesNextAPIResponse||this.includesNextAPIResponse,t.includesOriginalFormatData=e.includesOriginalFormatData||this.includesOriginalFormatData,t.includesRelatedVideo=e.includesRelatedVideo||this.includesRelatedVideo,t.clients=e.clients||this.clients,t.disableDefaultClients=e.disableDefaultClients||this.disableDefaultClients,t.oauth2Credentials=e.oauth2Credentials||((r=this.oauth2)==null?void 0:r.getCredentials()),t.parsesHLSFormat=e.parsesHLSFormat||this.parsesHLSFormat,t.originalProxy=e.originalProxy||this.originalProxy||void 0,t.quality=e.quality||this.quality||void 0,t.filter=e.filter||this.filter||void 0,t.excludingClients=e.excludingClients||this.excludingClients||[],t.includingClients=e.includingClients||this.includingClients||"all",t.range=e.range||this.range||void 0,t.begin=e.begin||this.begin||void 0,t.liveBuffer=e.liveBuffer||this.liveBuffer||void 0,t.highWaterMark=e.highWaterMark||this.highWaterMark||void 0,t.IPv6Block=e.IPv6Block||this.IPv6Block||void 0,t.dlChunkSize=e.dlChunkSize||this.dlChunkSize||void 0,!t.oauth2&&e.oauth2Credentials&&(me.Logger.warning("The OAuth2 token should be specified when instantiating the YtdlCore class, not as a function argument."),t.oauth2=new Mr.OAuth2(e.oauth2Credentials)),t}download(e,t={}){return(0,ya.download)(e,this.initializeOptions(t))}downloadFromInfo(e,t={}){return(0,ya.downloadFromInfo)(e,this.initializeOptions(t))}getBasicInfo(e,t={}){return(0,Ea.getBasicInfo)(e,this.initializeOptions(t))}getFullInfo(e,t={}){return(0,Ea.getFullInfo)(e,this.initializeOptions(t))}};o(vr,"YtdlCore");var ae=vr;qt.YtdlCore=ae;ae.writeStreamToFile=void 0;ae.chooseFormat=ba.FormatUtils.chooseFormat;ae.filterFormats=ba.FormatUtils.filterFormats;ae.validateID=kt.Url.validateID;ae.validateURL=kt.Url.validateURL;ae.getURLVideoID=kt.Url.getURLVideoID;ae.getVideoID=kt.Url.getVideoID});var wa=b(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0})});var Ia=b(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0})});var Ra=b(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0})});var Pa=b(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0})});var Da=b(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0})});var Oa=b(X=>{"use strict";var Kl=X&&X.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),ft=X&&X.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Kl(e,i,t)};Object.defineProperty(X,"__esModule",{value:!0});ft(wa(),X);ft(Ia(),X);ft(Ra(),X);ft(Pa(),X);ft(Da(),X)});var va=b(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0})});var La=b(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0})});var xa=b(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0})});var ka=b(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0})});var Va=b(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0})});var Ha=b(Y=>{"use strict";var Xl=Y&&Y.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Ge=Y&&Y.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Xl(e,i,t)};Object.defineProperty(Y,"__esModule",{value:!0});Ge(Oa(),Y);Ge(va(),Y);Ge(La(),Y);Ge(xa(),Y);Ge(ka(),Y);Ge(Va(),Y)});var Jl=b(oe=>{var zl=oe&&oe.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Ql=oe&&oe.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&zl(e,i,t)};Object.defineProperty(oe,"__esModule",{value:!0});oe.YtdlCore=void 0;var Zl=Z(),Br=Ye(),Lr=class Lr{async getCache(){return await caches.open("ytdlCoreCache")}async get(e){let r=await(await this.getCache()).match(e);return r?r.headers.get("Content-Type")==="application/json"?await r.json():await r.text():null}async set(e,t){let r=await this.getCache(),n;return typeof t=="object"?n=new Response(JSON.stringify(t),{headers:{"Content-Type":"application/json"}}):n=new Response(String(t),{headers:{"Content-Type":"text/plain"}}),await r.put(e,n),!0}async has(e){return await(await this.getCache()).match(e)!==void 0}async delete(e){return await(await this.getCache()).delete(e)}disable(){}initialization(){}};o(Lr,"CacheWithCacheStorage");var Vt=Lr;Zl.Platform.load({runtime:"browser",server:!1,cache:new Vt,fileCache:new Vt,fetcher:fetch,poToken:o(()=>new Promise(i=>{i({poToken:"",visitorData:""})}),"poToken"),default:{options:{hl:"en",gl:"US",includesPlayerAPIResponse:!1,includesNextAPIResponse:!1,includesOriginalFormatData:!1,includesRelatedVideo:!0,clients:["web","webCreator","tvEmbedded","ios","android"],disableDefaultClients:!1,disableFileCache:!1,parsesHLSFormat:!0}},requestRelated:{rewriteRequest:o((i,e)=>({url:i,options:e}),"rewriteRequest"),originalProxy:null},info:{version:Br.VERSION,repoUrl:Br.REPO_URL,issuesUrl:Br.ISSUES_URL}});var $a=Ta();Object.defineProperty(oe,"YtdlCore",{enumerable:!0,get:o(function(){return $a.YtdlCore},"get")});Ql(Ha(),oe);oe.default=$a.YtdlCore});export default Jl();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
